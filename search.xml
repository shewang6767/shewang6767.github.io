<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>åˆå­¦react</title>
      <link href="/2024/03/15/dva/"/>
      <url>/2024/03/15/dva/</url>
      
        <content type="html"><![CDATA[<h3 id="modelçš„æ•°æ®ç®¡ç†"><a href="#modelçš„æ•°æ®ç®¡ç†" class="headerlink" title="modelçš„æ•°æ®ç®¡ç†"></a>modelçš„æ•°æ®ç®¡ç†</h3><p>åœ¨umiæ­å»ºçš„é¡¹ç›®ä¸­çš„ <strong>çº¦å®šå¼çš„ model ç»„ç»‡æ–¹å¼</strong>å¦‚ä¸‹ï¼š</p><p><img src="https://img-blog.csdnimg.cn/8f3a45b903cc4a5b948c8d12b0646e38.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0Mjk3NzM4,size_16,color_FFFFFF,t_70" alt="img"></p><h4 id="1ï¼Œmodelé‡Œæœ‰äº›å•¥ï¼Ÿ"><a href="#1ï¼Œmodelé‡Œæœ‰äº›å•¥ï¼Ÿ" class="headerlink" title="1ï¼Œmodelé‡Œæœ‰äº›å•¥ï¼Ÿ"></a>1ï¼Œmodelé‡Œæœ‰äº›å•¥ï¼Ÿ</h4><p>modelé‡Œå…¶å®å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªå¯¹è±¡å¯¼å‡º</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">//namespaceå‘½åç©ºé—´ï¼Œç›¸å½“äºç»™modelå–ä¸ªåå­—ï¼Œä½†æ˜¯å„ä¸ªmodelçš„namespceæ˜¯ä¸èƒ½é‡å¤çš„</span></span><br><span class="line">  <span class="attr">namespace</span>: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">  <span class="comment">//stateæˆ‘ç†è§£ä¸ºæ˜¯æ•°æ®ä»“åº“ï¼Œå°±æ˜¯å­˜æ•°æ®çš„åœ°æ–¹ï¼Œmodelé‡Œçš„æ•°æ®éƒ½æ˜¯å­˜æ”¾åœ¨è¿™é‡Œçš„</span></span><br><span class="line">  state : &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;wang&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/*reducersæŠŠæ•°æ®å­˜åˆ°ä»“åº“ï¼ˆå­˜åˆ°stateï¼‰é‡Œçš„å”¯ä¸€æ–¹æ³•ï¼Œæˆ‘ä»¬ä¿®æ”¹stateé‡Œçš„æ•°æ®ä¸èƒ½ç›´æ¥åƒthis.name=&#x27;liu&#x27;è¿™æ ·å»ä¿®æ”¹ï¼Œè€Œå¿…é¡»é€šè¿‡è°ƒç”¨reducersé‡Œçš„æ–¹æ³•ï¼Œåœ¨ä¹‹åä¼šè¯¦ç»†è®²åˆ°*/</span></span><br><span class="line">  <span class="attr">reducers</span>:&#123;</span><br><span class="line"> <span class="comment">//å¿…é¡»returnï¼Œå¦åˆ™ä¼šæŠ¥é”™</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/*å¼‚æ­¥æ–¹æ³•ï¼Œç®€å•æ¥è¯´æˆ‘ä»¬çš„å¼‚æ­¥è¯·æ±‚å°±å†™åœ¨è¿™é‡Œ*/</span></span><br><span class="line">  <span class="attr">effects</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">/*è®¢é˜…ï¼Œåœ¨è¿™é‡Œæˆ‘çš„ç†è§£å°±æ˜¯ç›‘å¬é¡µé¢çš„ï¼Œæ¯”å¦‚ç›‘å¬åˆ°è¿›å…¥äº†æŸæŸé¡µé¢å°±è®©å®ƒæ‰§è¡Œç›¸å…³ä»£ç ä¹‹ç±»çš„*/</span></span><br><span class="line">  <span class="attr">subscriptions</span>: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="2ï¼Œconnectè¯¦è§£"><a href="#2ï¼Œconnectè¯¦è§£" class="headerlink" title="2ï¼Œconnectè¯¦è§£"></a>2ï¼Œconnectè¯¦è§£</h4><p>æ€ä¹ˆæŠŠmodelå’Œæˆ‘ä»¬å†™çš„ç»„ä»¶å…³è”èµ·æ¥å‘¢ï¼Ÿåªéœ€è¦ç”¨åˆ°connectå°±å¯ä»¥å•¦</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;dva&#x27;</span>       <span class="comment">// é¦–å…ˆä»dvaä¸­å¯¼å…¥connect</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Index</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&#x27;box&#x27;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//é€šè¿‡connectæŠŠmodelå’Œæˆ‘ä»¬å†™çš„Indexå…³è”èµ·æ¥ï¼Œä¹‹åä¼šè§£é‡ŠmapStateToPropsï¼Œå…ˆè¿™æ ·å†™ï¼Œtestæ˜¯modelçš„å‘½åç©ºé—´</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">mapStateToProps</span> = (<span class="params">&#123;test&#125;</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    ...test</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">connect</span>(mapStateToProps)(<span class="title class_">Index</span>);</span><br></pre></td></tr></table></figure><p>connectæ¥æ”¶å››ä¸ªå‚æ•°</p><blockquote><p><strong>connect(mapStateToProps, mapDispatchToProps,mergeProps,options)</strong></p><p>mapStateToPropså…è®¸æˆ‘ä»¬å°†   store   ä¸­çš„æ•°æ®ä½œä¸º props ç»‘å®šåˆ°ç»„ä»¶ä¸Šã€‚<br>mapDispatchToPropså°†       action   ä½œä¸ºpropsç»‘å®šåˆ°ç»„ä»¶ä¸Šã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">mapStateToProps</span>(<span class="params">state, ownprops</span>) &#123;    <span class="comment">// ownprops å®¹å™¨ç»„ä»¶çš„propsï¼ˆæœªæ˜ å°„stateï¼‰</span></span><br><span class="line">    <span class="keyword">return</span> &#123; obj &#125;   <span class="comment">// å¿…é¡»è¿”å›ä¸€ä¸ªå¯¹è±¡      // modelçš„stateï¼Œå¯¹è±¡åå°±æ˜¯modelçš„å‘½åç©ºé—´</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">mapStateToProps</span>(<span class="params">state</span>)&#123;</span><br><span class="line">    <span class="attr">data</span>: state.<span class="property">base</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¾ˆæ˜æ˜¾äº†ï¼Œæˆ‘ä»¬åœ¨mapStateToProps é‡Œè¿”å›ä»€ä¹ˆï¼Œç»„ä»¶çš„propså°±ä¼šæ¥æ”¶åˆ°ä»€ä¹ˆ</span></span><br></pre></td></tr></table></figure><h4 id="3ï¼Œdvaæ•°æ®æµå‘"><a href="#3ï¼Œdvaæ•°æ®æµå‘" class="headerlink" title="3ï¼Œdvaæ•°æ®æµå‘"></a>3ï¼Œdvaæ•°æ®æµå‘</h4><p>ç®€å•ç†è§£ï¼š</p><ul><li>é€šè¿‡é¡µé¢æˆ–è€…è®¢é˜…ï¼ˆsubscription ï¼‰ ç”¨ dispatch è°ƒç”¨reducerå’Œeffectsé‡Œé¢çš„å‡½æ•°</li><li>effectsé‡Œå®ç°servicesè¯·æ±‚ï¼ŒæŠŠæ•°æ®é€šè¿‡reduceræ”¾è¿›state</li><li>åœ¨connectå’Œç»„ä»¶è¿æ¥ï¼Œåœ¨é¡µé¢ä¸­æ‹¿åˆ°modelçš„æ•°æ®</li><li>é¡µé¢è°ƒæ¥å£ &#x3D;&gt;  dispatch effects</li><li>é¡µé¢æ”¹modelæ•°æ®  &#x3D;&gt; dispatch  reducer</li></ul><h4 id="4ï¼Œreducer"><a href="#4ï¼Œreducer" class="headerlink" title="4ï¼Œreducer"></a>4ï¼Œreducer</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ç»„ä»¶å…³è”åï¼Œç”¨æ³•å¦‚ä¸‹</span></span><br><span class="line"><span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">dispatch</span>(&#123;<span class="attr">type</span>: <span class="string">&#x27;test/save&#x27;</span>,<span class="attr">payload</span>: &#123;<span class="attr">msg</span>: <span class="string">&#x27;ä½ å¥½å‘€&#x27;</span>&#125;&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/aaa98fb2a1854c0aba24558d7c71c374.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM0Mjk3NzM4,size_16,color_FFFFFF,t_70" alt="img"></p><h4 id="5ï¼Œeffects"><a href="#5ï¼Œeffects" class="headerlink" title="5ï¼Œeffects"></a>5ï¼Œeffects</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">*å‡½æ•°å (action, effects) &#123; <span class="comment">// actionè·Ÿä¸Šé¢ä¸€æ ·ï¼Œ&#123; putï¼Œcallï¼Œselect &#125; = effect</span></span><br><span class="line">    <span class="comment">// call è°ƒå¼‚æ­¥æ¥å£ï¼Œ</span></span><br><span class="line">    <span class="comment">// put è°ƒreduceræ–¹æ³•</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> umi-dva </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆå­¦react</title>
      <link href="/2024/03/15/chu-shi-umi/"/>
      <url>/2024/03/15/chu-shi-umi/</url>
      
        <content type="html"><![CDATA[<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç°æœ‰nodeç¯å¢ƒï¼Œä¿æŒåœ¨10.13ç‰ˆæœ¬ä»¥ä¸Š</span></span><br><span class="line">$ node -v</span><br><span class="line">v10<span class="number">.13</span><span class="number">.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¨èyarnç®¡ç†ä¾èµ–</span></span><br><span class="line"># å›½å†…æº</span><br><span class="line">$ npm i yarn tyarn -g</span><br><span class="line"># åé¢æ–‡æ¡£é‡Œçš„ yarn æ¢æˆ tyarn</span><br><span class="line">$ tyarn -v</span><br><span class="line"></span><br><span class="line"># é˜¿é‡Œå†…ç½‘æº</span><br><span class="line">$ tnpm i yarn @ali/yarn -g</span><br><span class="line"># åé¢æ–‡æ¡£é‡Œçš„ yarn æ¢æˆ ayarn</span><br><span class="line">$ ayarn -v</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºé¡¹ç›®  åœ¨æ–°å»ºçš„æ–‡ä»¶å¤¹ä¸‹</span></span><br><span class="line">$ yarn create @umijs/umi-app</span><br><span class="line"><span class="comment">// å®‰è£…ä¾èµ–</span></span><br><span class="line">yarn install   æˆ–   yarn</span><br><span class="line"><span class="comment">// å¯åŠ¨</span></span><br><span class="line">yarn start</span><br></pre></td></tr></table></figure><h2 id="Umi-é¡¹ç›®"><a href="#Umi-é¡¹ç›®" class="headerlink" title="Umi é¡¹ç›®"></a>Umi é¡¹ç›®</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ package.<span class="property">json</span>    <span class="comment">//åŒ…å«æ’ä»¶å’Œæ’ä»¶é›†ï¼Œä»¥ @umijs/preset-ã€@umijs/plugin-ã€umi-preset- å’Œ umi-plugin- å¼€å¤´çš„ä¾èµ–ä¼š                       è¢«è‡ªåŠ¨æ³¨å†Œä¸ºæ’ä»¶æˆ–æ’ä»¶é›†</span></span><br><span class="line">â”œâ”€â”€ dist       <span class="comment">// æ‰§è¡Œumi buildåæ‰“åŒ…å¥½çš„æ–‡ä»¶ï¼ŒåæœŸè¦éƒ¨ç½²åˆ°æœåŠ¡å™¨</span></span><br><span class="line">â”œâ”€â”€ mock       <span class="comment">// å­˜å‚¨mockæ–‡ä»¶ï¼Œæ¨¡æ‹Ÿçš„ä¸€äº›æ•°æ®ï¼Œï¼Œæ­¤å¤„çš„jså’Œtsæ–‡ä»¶ä¼šè¢«è§£ææˆmockæ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ public     <span class="comment">// æ­¤å¤„çš„æ–‡ä»¶ä¼šè¢«copyåˆ°è¾“å‡ºè·¯å¾„ï¼Œå˜é€šçš„æ•°æ®èµ„æºç›®å½•ï¼Œå’Œæ— éœ€æ‰“åŒ…çš„èµ„æº</span></span><br><span class="line">â””â”€â”€ src       <span class="comment">// æºç </span></span><br><span class="line">    â”œâ”€â”€ .<span class="property">umi</span>               <span class="comment">// ä¸´æ—¶æ–‡ä»¶ï¼Œå¦‚å…¥å£æ–‡ä»¶ï¼Œè·¯ç”±ç­‰ï¼Œä¸è¦æäº¤åˆ°ä»“åº“ï¼Œå®ƒä¼šåœ¨devå’Œbuildæ—¶é‡æ–°ç”Ÿæˆ</span></span><br><span class="line">    â”œâ”€â”€ layouts/index.<span class="property">tsx</span>       <span class="comment">//çº¦å®šå¼è·¯ç”±æ—¶çš„å…¨å±€å¸ƒå±€æ–‡ä»¶</span></span><br><span class="line">    â”œâ”€â”€ pages                   <span class="comment">// å­˜æ”¾æ‰€æœ‰è·¯ç”±ç»„ä»¶</span></span><br><span class="line">     â”œâ”€â”€ index.<span class="property">less</span></span><br><span class="line">        â””â”€â”€ index.<span class="property">tsx</span></span><br><span class="line">    â”œâ”€â”€ models                  <span class="comment">// æ•°æ®æµ</span></span><br><span class="line">    â”œâ”€â”€ wrappers                <span class="comment">// æƒé™ç®¡ç†</span></span><br><span class="line">    â””â”€â”€ app.<span class="property">ts</span>ï¼ˆ.<span class="property">js</span>ï¼‰       <span class="comment">// è¿è¡Œæ—¶é…ç½®æ–‡ä»¶ï¼Œåœ¨è¿™å„¿å¯æ‰©å±•è¿è¡Œæ—¶çš„èƒ½åŠ›ï¼Œå¦‚ä¿®æ”¹è·¯ç”±ï¼Œä¿®æ”¹renderæ–¹æ³•</span></span><br><span class="line">â”œâ”€â”€ <span class="variable language_">global</span>.<span class="property">css</span>         <span class="comment">// çº¦å®šçš„å…¨å±€æ ·å¼æ–‡ä»¶ï¼Œè‡ªåŠ¨å¼•å…¥ï¼Œä¹Ÿå¯ä»¥ç”¨ global.less</span></span><br><span class="line">â”œâ”€â”€ .<span class="property">umirc</span>.<span class="property">ts</span>        <span class="comment">// é…ç½®æ–‡ä»¶ï¼ŒåŒ…å« umi å†…ç½®åŠŸèƒ½å’Œæ’ä»¶çš„é…ç½®   ğŸ”º</span></span><br><span class="line">â”œâ”€â”€  config / config.<span class="property">js</span>    <span class="comment">// åŒ .umirc.ts äºŒé€‰ä¸€å°±è¡Œ</span></span><br><span class="line">â”œâ”€â”€ .<span class="property">editorconfig</span>    <span class="comment">// ç¼–è¾‘å™¨é«˜äº®æ”¯æŒ</span></span><br><span class="line">â”œâ”€â”€ .<span class="property">env</span>             <span class="comment">// ç¯å¢ƒå˜é‡ï¼Œ</span></span><br><span class="line">â”œâ”€â”€ .<span class="property">gitignore</span>       <span class="comment">// gitå¿½ç•¥æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ tsconfig.<span class="property">json</span>    <span class="comment">// tsçš„é…ç½®æ–‡ä»¶</span></span><br><span class="line">â”œâ”€â”€ typings.<span class="property">d</span>.<span class="property">ts</span>     <span class="comment">// tsæ–‡ä»¶</span></span><br></pre></td></tr></table></figure><h3 id="é…ç½®æ–‡ä»¶"><a href="#é…ç½®æ–‡ä»¶" class="headerlink" title="é…ç½®æ–‡ä»¶"></a>é…ç½®æ–‡ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">.<span class="property">umirc</span>.<span class="property">ts</span> æˆ–  config/config.<span class="property">ts</span>   é…ç½®é¡¹ç›®å’Œæ’ä»¶ï¼Œæ”¯æŒes6</span><br><span class="line"><span class="comment">// å¦‚æœé¡¹ç›®å¤æ‚ä¹Ÿå¯ä»¥æ‹†åˆ†</span></span><br><span class="line">congig/route.<span class="property">ts</span>   è·¯ç”±é…ç½®</span><br><span class="line">config/config.<span class="property">ts</span></span><br><span class="line"><span class="comment">// æœ¬åœ°ä¸´æ—¶é…ç½®ï¼Œå¯æ–°å»º.umirc.local.ts, æœ€åä¼šå’Œã€‚umirc.tsåšdeep mergeï¼ˆæ·±åˆå¹¶ï¼‰å½¢æˆæœ€ç»ˆé…ç½®</span></span><br><span class="line"> .<span class="property">umirc</span>.<span class="property">local</span>.<span class="property">ts</span>ä»…åœ¨umi devæ—¶æœ‰æ•ˆï¼Œumi buildæ—¶ä¸ä¼šè¢«åŠ è½½</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="comment">// jsä»£ç æç¤º</span></span><br><span class="line"> ï¼Ÿ</span><br><span class="line"></span><br><span class="line"> <span class="comment">// å¤šä»½ç¯å¢ƒå¤šä»½é…ç½®</span></span><br><span class="line"></span><br><span class="line"> é€šè¿‡æŒ‡å®š<span class="variable constant_">UMI_ENV</span>=cloud</span><br></pre></td></tr></table></figure><h3 id="è¿è¡Œæ—¶é…ç½®"><a href="#è¿è¡Œæ—¶é…ç½®" class="headerlink" title="è¿è¡Œæ—¶é…ç½®"></a>è¿è¡Œæ—¶é…ç½®</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// çº¦å®šsrc/app.tsxä¸ºè¿è¡Œæ—¶é…ç½®</span><br><span class="line">åŒºåˆ«äºä¸Šæ˜¯ è¿è¡Œåœ¨æµè§ˆå™¨ç«¯ï¼Œæ³¨æ„ä¸è¦å¼•å…¥nodeä¾èµ–</span><br></pre></td></tr></table></figure><p>formatMessage</p><ol><li>è°ƒç”¨<code>formatMessage</code>å‡½æ•°ï¼Œå¹¶å°†å‚æ•°å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ é€’ç»™å®ƒã€‚</li><li><code>formatMessage</code>å‡½æ•°å°†æ ¹æ®æ¶ˆæ¯IDæŸ¥æ‰¾ç›¸åº”çš„æ¶ˆæ¯æ–‡æœ¬ï¼Œå¹¶å¯¹å…¶è¿›è¡Œæ ¼å¼åŒ–å¤„ç†ã€‚</li><li>å‡½æ•°è¿”å›æ ¼å¼åŒ–åçš„æ¶ˆæ¯æ–‡æœ¬ï¼Œå¯ä»¥åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨è¯¥æ–‡æœ¬ã€‚</li></ol><h3 id="æ„å»ºæ—¶é…ç½®"><a href="#æ„å»ºæ—¶é…ç½®" class="headerlink" title="æ„å»ºæ—¶é…ç½®"></a>æ„å»ºæ—¶é…ç½®</h3><img src="D:\webstorm\typora\images\image-20231128174303368.png" alt="image-20231128174303368" style="zoom:67%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// umirc.ts æ–‡ä»¶</span></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">    <span class="attr">nodeModulesTransform</span>: &#123;    <span class="comment">// node modules ç›®å½•ä¸‹ä¾èµ–æ–‡ä»¶çš„ç¼–è¯‘æ–¹æ³•</span></span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;none&#x27;</span>   <span class="comment">// ï¼ˆnone æˆ– allï¼‰ noneå¿« å…¼å®¹æ€§ä½ all æ…¢ å…¼å®¹æ€§é«˜</span></span><br><span class="line">    &#125;ï¼Œ</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">    <span class="attr">path</span>:<span class="string">&#x27;/&#x27;</span>, <span class="attr">component</span>:<span class="string">&#x27;@/pages/index&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line">    <span class="attr">fastRefresh</span>:&#123;&#125;,    <span class="comment">// å¿«é€Ÿåˆ·æ–°ï¼Œå¯ä»¥ä¿æŒç»„ä»¶çŠ¶æ€ï¼ŒåŒæ—¶ç¼–è¾‘æä¾›åŠæ—¶åé¦ˆ</span></span><br><span class="line">    <span class="attr">devServer</span>: &#123;</span><br><span class="line">        <span class="attr">port</span>: <span class="number">8081</span>,   <span class="comment">// .envæƒé™æ›´é«˜</span></span><br><span class="line">        <span class="attr">https</span>: <span class="literal">true</span>   <span class="comment">// https å®‰å…¨è®¿é—®</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;UMI3&#x27;</span>,     <span class="comment">// æ ‡é¢˜</span></span><br><span class="line">    <span class="attr">favicon</span>: <span class="string">&#x27;åœ°å€&#x27;</span>    <span class="comment">// çº¿ä¸Šï¼Œçº¿ä¸‹éƒ½å¯ä»¥</span></span><br><span class="line"><span class="attr">dynamicImport</span>: &#123;</span><br><span class="line">        <span class="attr">loading</span>: <span class="string">&#x27;@/components/loading&#x27;</span>, <span class="comment">// æŒ‰éœ€åŠ è½½æ—¶æŒ‡å®šçš„loading</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">mountElementId</span>: <span class="string">&#x27;app&#x27;</span>,  <span class="comment">// æŒ‡å®šæ¸²æŸ“çš„htmlæ ¹å…ƒç´ </span></span><br><span class="line">    theme    <span class="comment">// pcç«¯ä¸»é¢˜è‰²</span></span><br><span class="line"><span class="comment">// æ‰‹æœºç«¯ä¸»é¢˜ï¼šv2ç‰ˆæœ¬è·Ÿpcç«¯é…ç½®ä¸€æ ·ï¼Œ v5ç‰ˆæœ¬å¯ä»¥åœ¨srcä¸‹é…ç½®å…¨å±€çš„æ ·å¼æ–‡ä»¶global.less</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="æ¨¡æ¿çº¦å®š"><a href="#æ¨¡æ¿çº¦å®š" class="headerlink" title="æ¨¡æ¿çº¦å®š"></a>æ¨¡æ¿çº¦å®š</h3><p>é»˜è®¤çš„umié¡¹ç›®ç›®å½•æ²¡æœ‰htmlï¼Œè‡ªå·±åˆ›å»ºå†pagesä¸‹çš„ document.ejs ä¹¦å†™è‡ªå·±çš„ä»£ç </p><p>è‡ªå®šä¹‰é¡¹ç›®å…¥å£</p><p>ç»„ä»¶åº“:</p><img src="D:\webstorm\typora\images\image-20231211224005505.png" alt="image-20231211224005505" style="zoom: 33%;" /><p>ç§»åŠ¨ç«¯antd-mobile-v2æˆ–è€… antd-mobile-v5ä¸¤ä¸ªç‰ˆæœ¬ï¼š@umijs&#x2F;preset-reactåŒ… æ›´æ–°åˆ°æœ€æ–°</p><h3 id="å›¾ç‰‡å’Œå…¶ä»–èµ„æºå¼•å…¥ï¼š"><a href="#å›¾ç‰‡å’Œå…¶ä»–èµ„æºå¼•å…¥ï¼š" class="headerlink" title="å›¾ç‰‡å’Œå…¶ä»–èµ„æºå¼•å…¥ï¼š"></a>å›¾ç‰‡å’Œå…¶ä»–èµ„æºå¼•å…¥ï¼š</h3><p>1ï¼Œä¼ åˆ°CDNï¼Œåœ¨jsæˆ–è€…cssè¾“å…¥ç»å¯¹åœ°å€ï¼Œï¼ˆæ•°æ®å›¾ç‰‡ï¼‰</p><p>2ï¼Œæ”¾åˆ°é¡¹ç›®ç›®å½•ï¼Œåœ¨jsæˆ–cssä¸­å¼•å…¥ï¼Œï¼ˆå†™æ­»çš„ï¼‰ç›¸å¯¹è·¯å¾„ï¼Œå¦‚æœå›¾ç‰‡å°äº10kbï¼Œè¿˜ä¼šè¢«è½¬åŒ–ä¸ºbase64</p><img src="D:\webstorm\typora\images\image-20231212131536159.png" alt="image-20231212131536159" style="zoom:67%;" /><h3 id="less-æ ·å¼æ¨¡å—åŒ–"><a href="#less-æ ·å¼æ¨¡å—åŒ–" class="headerlink" title="less-æ ·å¼æ¨¡å—åŒ–"></a>less-æ ·å¼æ¨¡å—åŒ–</h3><p>æ²¡æœ‰å†…ç½®sass</p><img src="D:\webstorm\typora\images\image-20231212132043349.png" alt="image-20231212132043349" style="zoom:50%;" /><img src="D:\webstorm\typora\images\image-20231212132614045.png" alt="image-20231212132614045" style="zoom:50%;" /><h3 id="hooks-å‡½æ•°å¼-ç¼–å†™ç»„ä»¶"><a href="#hooks-å‡½æ•°å¼-ç¼–å†™ç»„ä»¶" class="headerlink" title="hooks + å‡½æ•°å¼ ç¼–å†™ç»„ä»¶"></a>hooks + å‡½æ•°å¼ ç¼–å†™ç»„ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> ç»„ä»¶() &#123;&#125;</span><br><span class="line"><span class="keyword">const</span> ç»„ä»¶ = <span class="function">(<span class="params">props</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨hooks</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å®šä¹‰ å‡½æ•°  å˜é‡</span></span><br><span class="line">    <span class="keyword">return</span> jsx</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">useMemo</span>(<span class="function">() =&gt;</span> [&#125;, [ä¾èµ–é¡¹])  <span class="comment">// ç±»ä¼¼äºuseEffect</span></span><br><span class="line"><span class="title function_">useCallback</span>()</span><br></pre></td></tr></table></figure><h3 id="è·¯ç”±ï¼ŒåŠ¨æ€ï¼Œæƒé™ï¼Œçº¦å®šå¼"><a href="#è·¯ç”±ï¼ŒåŠ¨æ€ï¼Œæƒé™ï¼Œçº¦å®šå¼" class="headerlink" title="è·¯ç”±ï¼ŒåŠ¨æ€ï¼Œæƒé™ï¼Œçº¦å®šå¼"></a>è·¯ç”±ï¼ŒåŠ¨æ€ï¼Œæƒé™ï¼Œçº¦å®šå¼</h3><h4 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®:"></a>é…ç½®:</h4><img src="D:\webstorm\typora\images\image-20231212142053195.png" alt="image-20231212142053195" style="zoom:50%;" /><img src="D:\webstorm\typora\images\image-20231212142842774.png" alt="image-20231212142842774" style="zoom: 50%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="string">&#x27;@/layouts/base-layouts&#x27;</span>,</span><br><span class="line">        <span class="attr">routes</span>: [                   <span class="comment">// å­è·¯ç”±</span></span><br><span class="line">            &#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;@/pages/login&#x27;</span> &#125;ï¼Œ</span><br><span class="line">            &#123; <span class="attr">path</span>: <span class="string">&#x27;/reg&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;@/pages/reg&#x27;</span> &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;/goods&#x27;</span>,</span><br><span class="line">                <span class="attr">wrappers</span>: [<span class="string">&#x27;@/wrappers/auth&#x27;</span>],        <span class="comment">// æˆæƒè·¯ç”±é…ç½®é¡¹wrappers  ï¼Œè®¿é—®goodsï¼Œä¼šå…ˆæ»¡è¶³authçš„æ¡ä»¶</span></span><br><span class="line">                <span class="attr">component</span>: <span class="string">&#x27;@/layouts/aside-ayouts&#x27;</span>,</span><br><span class="line">                <span class="attr">routes</span>: [</span><br><span class="line">                    &#123; <span class="attr">path</span>: <span class="string">&#x27;/goods&#x27;</span>ï¼Œ <span class="attr">component</span>: <span class="string">&#x27;@/pages/goods&#x27;</span>&#125;,</span><br><span class="line">                    &#123; <span class="attr">path</span>: <span class="string">&#x27;/goods/:id&#x27;</span>, <span class="attr">component</span>: <span class="string">&#x27;@/pages/goods/goods-detail&#x27;</span>&#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>, <span class="attr">redirect</span>: <span class="string">&#x27;/login&#x27;</span>&#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="é¡µé¢è·³è½¬ï¼Œå‚æ•°æ¥æ”¶"><a href="#é¡µé¢è·³è½¬ï¼Œå‚æ•°æ¥æ”¶" class="headerlink" title="é¡µé¢è·³è½¬ï¼Œå‚æ•°æ¥æ”¶"></a>é¡µé¢è·³è½¬ï¼Œå‚æ•°æ¥æ”¶</h4><h5 id="ä¼ å‚ï¼š"><a href="#ä¼ å‚ï¼š" class="headerlink" title="ä¼ å‚ï¼š"></a>ä¼ å‚ï¼š</h5><img src="D:\webstorm\typora\images\image-20231212144328918.png" alt="image-20231212144328918" style="zoom:50%;" /><img src="D:\webstorm\typora\images\image-20231212151956365.png" alt="image-20231212151956365" style="zoom: 50%;" /><img src="D:\webstorm\typora\images\image-20231212152547223.png" alt="image-20231212152547223" style="zoom:50%;" /><h5 id="æ¥æ”¶ï¼š"><a href="#æ¥æ”¶ï¼š" class="headerlink" title="æ¥æ”¶ï¼š"></a>æ¥æ”¶ï¼š</h5><img src="D:\webstorm\typora\images\image-20231212153049279.png" alt="image-20231212153049279" style="zoom: 50%;" /><p>1ï¼Œè·¯ç”±ä¸Šä¸‹æ–‡</p><img src="D:\webstorm\typora\images\image-20231212153022013.png" alt="image-20231212153022013" style="zoom:50%;" /><p>2ï¼Œhooks</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; useHistory, useLocaltion, useParams, useRouteMatch &#125; form <span class="string">&#x27;umi&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">GoodsDetail</span>() &#123;</span><br><span class="line">    <span class="keyword">const</span> &#123; sreach &#125; = useLocaltion;</span><br><span class="line">    <span class="keyword">const</span> &#123; id &#125; = useParams</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®æ¨¡æ‹Ÿumi-mock"><a href="#æ•°æ®æ¨¡æ‹Ÿumi-mock" class="headerlink" title="æ•°æ®æ¨¡æ‹Ÿumi-mock"></a>æ•°æ®æ¨¡æ‹Ÿumi-mock</h3><p>mockç›®å½•ï¼š åœ¨æ ¹ç›®å½•ä¸‹ï¼Œæˆ–è€…åœ¨pageçš„ç›®å½•ä¸‹ï¼ˆåŒæ—¶åœ¨è¿™ç›®å½•ä¸‹çš„mockåŠ ä¸Šä¸‹æ ‡_mockï¼‰</p><img src="D:\webstorm\typora\images\image-20231212154023015.png" alt="image-20231212154023015" style="zoom: 50%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¾‹ï¼š</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// æ”¯æŒå€¼ä¸º objectå’ŒArray</span></span><br><span class="line">    <span class="string">&#x27;GET /umi/goods&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">success</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">errorCode</span>: <span class="string">&#x27;xx&#x27;</span>,</span><br><span class="line"><span class="attr">errorMessage</span>: <span class="string">&#x27;ooo&#x27;</span>,</span><br><span class="line">        <span class="attr">showType</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">traceId</span>: <span class="string">&#x27;i&#x27;</span>,</span><br><span class="line"><span class="attr">data</span>: [</span><br><span class="line">&#123; <span class="attr">id</span>: <span class="number">1</span>ï¼Œ<span class="attr">name</span>: <span class="string">&#x27;éŸ­èœ&#x27;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">id</span>: <span class="number">2</span>, <span class="attr">name</span>: <span class="string">&#x27;è¥¿çº¢æŸ¿&#x27;</span> &#125;,</span><br><span class="line">    ],</span><br><span class="line">&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å†™æˆå‡½æ•°</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"> <span class="string">&#x27;post /api/users/create&#x27;</span>: <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">     res.<span class="title function_">send</span>(<span class="string">&#x27;ok&#x27;</span>);      <span class="comment">// å‘é€æ•°æ®</span></span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>ï¼Œæ¨¡æ‹Ÿå»¶æ—¶</span><br><span class="line"><span class="keyword">import</span> &#123; delay &#125; <span class="keyword">from</span> <span class="string">&#x27;roadhog-api-doc&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">delay</span>(</span><br><span class="line">&#123;  å’Œä¸Šé¢å†™çš„ä¸€æ ·  &#125;,     <span class="comment">// æ¥å£</span></span><br><span class="line"><span class="number">2000</span>,  <span class="comment">//æ—¶é—´</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>ï¼Œç™»å½•éªŒè¯ï¼Œåˆ¤æ–­ç®¡ç†å‘˜</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="string">&#x27;POST /umi/login&#x27;</span>: <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; username, password &#125; = req.<span class="property">body</span>;</span><br><span class="line">        <span class="keyword">if</span> (username===<span class="string">&#x27;alex&#x27;</span>&amp;&amp; password === <span class="string">&#x27;alex123&#x27;</span>) &#123;</span><br><span class="line">            res.<span class="title function_">send</span>(&#123;</span><br><span class="line"><span class="attr">err</span>: <span class="number">0</span>,</span><br><span class="line"><span class="attr">msg</span>: <span class="string">&#x27;æˆåŠŸ&#x27;</span></span><br><span class="line">                <span class="attr">currentAuthority</span>:  <span class="string">&#x27;user&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (username ===  <span class="string">&#x27;admin&#x27;</span> &amp;&amp; password === <span class="string">&#x27;admin123&#x27;</span>) &#123;</span><br><span class="line">            res.<span class="title function_">send</span>(&#123;</span><br><span class="line"><span class="attr">err</span>: <span class="number">0</span>,</span><br><span class="line"><span class="attr">msg</span>: <span class="string">&#x27;æˆåŠŸ&#x27;</span></span><br><span class="line">                <span class="attr">currentAuthority</span>:  <span class="string">&#x27;admin&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            res.<span class="title function_">send</span>(&#123;</span><br><span class="line"><span class="attr">err</span>: <span class="number">1</span>,</span><br><span class="line"><span class="attr">msg</span>: <span class="string">&#x27;å¤±è´¥&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>ï¼Œæ¨¡æ‹Ÿæ•°æ®å¢åˆ æ”¹æŸ¥</span><br><span class="line"><span class="comment">// å¢åŠ </span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line"><span class="string">&#x27;POST /umi/login&#x27;</span>: <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>);</span><br><span class="line">        res.<span class="title function_">send</span>(</span><br><span class="line">        <span class="title class_">Mock</span>.<span class="title function_">mock</span>(&#123;</span><br><span class="line">            <span class="string">&#x27;data|1&#x27;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">code</span>: <span class="number">0</span>,</span><br><span class="line">                    <span class="attr">data</span>: &#123; ...req.<span class="property">body</span>, <span class="attr">a</span>: <span class="number">2</span> &#125;,</span><br><span class="line">                    <span class="attr">msg</span>: <span class="string">&#x27;æˆåŠŸ&#x27;</span>ï¼Œ</span><br><span class="line">                &#125;ï¼Œ</span><br><span class="line">                &#123;</span><br><span class="line">                <span class="attr">code</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">msg</span>: <span class="string">&#x27;å¤±è´¥&#x27;</span></span><br><span class="line">                &#125;ï¼Œ</span><br><span class="line">            ]ï¼Œ</span><br><span class="line">        &#125;).<span class="property">data</span>ï¼Œ</span><br><span class="line">      )ï¼›</span><br><span class="line">    &#125;ï¼Œ</span><br><span class="line">    <span class="comment">// åˆ é™¤</span></span><br><span class="line">    <span class="string">&#x27;DELETE /umi/login&#x27;</span>: <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">params</span>.<span class="property">id</span>);     <span class="comment">// æ‹¿åˆ°åˆ é™¤çš„id</span></span><br><span class="line">        res.<span class="title function_">send</span>(</span><br><span class="line">        <span class="title class_">Mock</span>.<span class="title function_">mock</span>(&#123;</span><br><span class="line">            <span class="string">&#x27;data|1&#x27;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">code</span>: <span class="number">0</span>,</span><br><span class="line">                    <span class="attr">data</span>: &#123; <span class="attr">task_id</span>: <span class="number">123</span> &#125;,    <span class="comment">// åˆ é™¤æ•°æ®</span></span><br><span class="line">                    <span class="attr">msg</span>: <span class="string">&#x27;æˆåŠŸ&#x27;</span>ï¼Œ</span><br><span class="line">                &#125;ï¼Œ</span><br><span class="line">                &#123;</span><br><span class="line">                <span class="attr">code</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">msg</span>: <span class="string">&#x27;å¤±è´¥&#x27;</span></span><br><span class="line">                &#125;ï¼Œ</span><br><span class="line">            ]ï¼Œ</span><br><span class="line">        &#125;).<span class="property">data</span>ï¼Œ</span><br><span class="line">    );</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ”¹</span></span><br><span class="line">    <span class="string">&#x27;PATCH /umi/list/:id&#x27;</span>: <span class="function">(<span class="params">req, res</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(req.<span class="property">body</span>);     <span class="comment">// ä¿®æ”¹çš„æ•°æ®</span></span><br><span class="line">        res.<span class="title function_">send</span>(</span><br><span class="line">        <span class="title class_">Mock</span>.<span class="title function_">mock</span>(&#123;</span><br><span class="line">            <span class="string">&#x27;data|1&#x27;</span>: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">code</span>: <span class="number">0</span>,</span><br><span class="line">                    <span class="attr">data</span>: &#123; ...req.<span class="property">body</span> &#125;,  <span class="comment">// ä¿®æ”¹åçš„æ•°æ®å’ŒåŸæœ¬çš„æ•°æ®è¿›è¡Œä¸€ä¸ªåˆå¹¶</span></span><br><span class="line">                    <span class="attr">msg</span>: <span class="string">&#x27;æˆåŠŸ&#x27;</span>ï¼Œ</span><br><span class="line">                &#125;ï¼Œ</span><br><span class="line">                &#123;</span><br><span class="line">                <span class="attr">code</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">msg</span>: <span class="string">&#x27;å¤±è´¥&#x27;</span></span><br><span class="line">                &#125;ï¼Œ</span><br><span class="line">            ]ï¼Œ</span><br><span class="line">        &#125;).<span class="property">data</span>ï¼Œ</span><br><span class="line">    );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®æ¨¡æ‹Ÿ-json-server"><a href="#æ•°æ®æ¨¡æ‹Ÿ-json-server" class="headerlink" title="æ•°æ®æ¨¡æ‹Ÿ json-server"></a>æ•°æ®æ¨¡æ‹Ÿ json-server</h3><p>ç¬¬ä¸‰æ–¹</p><p>æ–°å»ºjsonserverï¼Œ jsonserverä¸‹çš„db.js</p><h3 id="fetchè¯·æ±‚"><a href="#fetchè¯·æ±‚" class="headerlink" title="fetchè¯·æ±‚"></a>fetchè¯·æ±‚</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// fetchï¼Œjsè‡ªå¸¦</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">login</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/umi/login&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        <span class="comment">// header: &#123;&#125;     åŸç”Ÿfetchä¸ä¼šæºå¸¦é»˜è®¤çš„è¯·æ±‚å¤´ï¼Œéœ€è¦æ‰‹åŠ¨æ·»åŠ </span></span><br><span class="line">        <span class="attr">body</span>: <span class="string">&#x27;username=alex&amp;password=alex123&#x27;</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">let</span> data = <span class="keyword">await</span> res.<span class="title function_">json</span>();</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fetch login&#x27;</span>, data)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="umi-requestè¯·æ±‚"><a href="#umi-requestè¯·æ±‚" class="headerlink" title="umi-requestè¯·æ±‚"></a>umi-requestè¯·æ±‚</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; request &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span></span><br><span class="line"><span class="comment">// ç”¨æ³• request(url, options)   ~~axios.get(url,options)    res =&gt; res.data</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Goods</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/umi/goods&#x27;</span>)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å¸¦å‚æ•°</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">Login</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> res = <span class="keyword">await</span> <span class="title function_">request</span>(<span class="string">&#x27;/umi/login&#x27;</span>, &#123;</span><br><span class="line">        <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">        <span class="attr">data</span>: &#123;</span><br><span class="line">            <span class="attr">username</span>: <span class="string">&#x27;zs&#x27;</span>,</span><br><span class="line">            <span class="attr">password</span>: <span class="string">&#x27;admin123&#x27;</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="umi-useRequestè¯·æ±‚"><a href="#umi-useRequestè¯·æ±‚" class="headerlink" title="umi-useRequestè¯·æ±‚"></a>umi-useRequestè¯·æ±‚</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¿…é¡»è¿”å›ä¸€ä¸ªdataå­—æ®µï¼Œå¦‚æœæ²¡æœ‰ï¼Œå¯èƒ½ä¼šäº§ç”Ÿæ‹¿ä¸åˆ°æ•°æ®çš„æƒ…å†µ</span></span><br><span class="line"><span class="comment">// å¯ä»¥åœ¨configæ–‡ä»¶ä¸­ï¼Œé…ç½®request: &#123; darafield: &#x27;&#x27;, &#125;  è®¾ç½®ä¸ºç©ºï¼Œè¿™æ ·å°±ä¸ä¼šå—åˆ°æ˜¯å¦æœ‰dataå­—æ®µçš„å½±å“ã€‚</span></span><br><span class="line">ä½¿ç”¨useRequest</span><br><span class="line"><span class="keyword">import</span> &#123; useRequest &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span></span><br><span class="line"><span class="comment">// umi-mock</span></span><br><span class="line"><span class="keyword">const</span> &#123; data, error, loading &#125; = <span class="title function_">useRequest</span>(<span class="string">&#x27;/umi/goods&#x27;</span>)</span><br><span class="line"><span class="comment">// data: æ‹¿åˆ°çš„æ•°æ®ï¼Œ error: äº§ç”Ÿçš„é”™è¯¯ï¼Œ loading: åŠ è½½ä¸­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// çº¿ä¸Šæ¥å£</span></span><br><span class="line"><span class="keyword">const</span> &#123; data, error, loading &#125; = <span class="title function_">useRequest</span>( url )</span><br><span class="line"><span class="comment">// Access-Control-Allow-Origin è·¨åŸŸ</span></span><br><span class="line"><span class="comment">/* åœ¨config ä¸­å¼•å…¥ä¸€ä¸ªä»£ç†çš„æ¨¡å—  proxy.js åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­é…ç½®ä»£ç†å†…å®¹</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// å‚æ•° json-server</span></span><br><span class="line"><span class="keyword">const</span> &#123; data, error, loading, run1, run2 &#125; = <span class="title function_">useRequest</span>(&#123;</span><br><span class="line">    <span class="attr">url</span>: <span class="string">&#x27;/umi/login&#x27;</span>,</span><br><span class="line">    <span class="attr">method</span>: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">username</span>: <span class="string">&#x27;alex&#x27;</span>,</span><br><span class="line">        <span class="attr">password</span>: <span class="string">&#x27;alex123&#x27;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line"><span class="comment">// umi-useRequest å¯ä»¥è·Ÿç¬¬äºŒä¸ªå‚æ•°</span></span><br><span class="line">&#123; <span class="attr">manual</span>: <span class="literal">true</span> &#125;  <span class="comment">// æ‰‹åŠ¨é€šè¿‡è¿è¡Œrunè§¦å‘   é€šè¿‡è°ƒç”¨run1æ¥è§¦å‘è¯·æ±‚</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// è½®è¯¢</span></span><br><span class="line"><span class="keyword">const</span> &#123; data, loading, error &#125; = <span class="title function_">useRequest</span>(</span><br><span class="line"><span class="function">(<span class="params">_limit</span>) =&gt;</span> (&#123;       <span class="comment">// æ¥æ”¶å‚æ•°ï¼Œ ä¹Ÿå¯ä»¥ç›´æ¥å†™æˆå¯¹è±¡ &#123; &#125;</span></span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">params</span>: &#123; _limit &#125;,</span><br><span class="line">    &#125;),</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">pollingInterval</span>: <span class="number">1000</span>,   <span class="comment">// è½®è¯¢ä¸€ç§’è¯»ä¸€æ¬¡</span></span><br><span class="line">        <span class="attr">pollingWhenHidden</span>: <span class="literal">false</span>, <span class="comment">// å±å¹•ä¸å¯è§æ—¶ï¼Œæš‚åœè½®è¯¢</span></span><br><span class="line">    &#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="dva"><a href="#dva" class="headerlink" title="dva"></a>dva</h3><p>dva &#x3D; React-Router + Redux + Redux-saga</p><ul><li>è·¯ç”±ï¼š <a href="https://github.com/ReactTraining/react-router/tree/v2.8.1">React-Router</a></li><li>æ¶æ„ï¼š <a href="https://github.com/reactjs/redux">Redux</a></li><li>å¼‚æ­¥æ“ä½œï¼š <a href="https://github.com/yelouafi/redux-saga">Redux-saga</a></li></ul><p>çŠ¶æ€ç®¡ç†ã€‚dvaæ˜¯ä¸€ä¸ªåŸºäº <a href="https://link.juejin.cn/?target=https://github.com/reduxjs/redux">redux</a> å’Œ <a href="https://link.juejin.cn/?target=https://github.com/redux-saga/redux-saga">redux-saga</a> çš„æ•°æ®æµæ–¹æ¡ˆã€‚</p><p>dva å†…ç½®fetchï¼Œreact-routerï¼Œä¹Ÿå¯è¯´æ˜¯ä¸€ä¸ªè½»é‡çº§æ¡†æ¶</p><p>æ—©æœŸdvaæœ¬èº«æ˜¯ä¸€ä¸ªè½»é‡çº§æ¡†æ¶ï¼Œç°åœ¨dvaå½“ä½œæ’ä»¶è¢«  umiæ¡†æ¶  å·²ç»å†…ç½®äº†</p><table><thead><tr><th align="center"></th><th align="center">redux</th><th align="center">dva</th></tr></thead><tbody><tr><td align="center">çŠ¶æ€æ•°æ®</td><td align="center">state</td><td align="center">state</td></tr><tr><td align="center">è¡Œä¸ºæè¿°</td><td align="center">action</td><td align="center">action</td></tr><tr><td align="center">åŒæ­¥çš„ã€æ— å‰¯ä½œç”¨ä¸šåŠ¡</td><td align="center">reducer</td><td align="center">reducer</td></tr><tr><td align="center">å¼‚æ­¥çš„ã€æœ‰å‰¯ä½œç”¨ï¼ˆå®šæ—¶å™¨ï¼‰ä¸šåŠ¡</td><td align="center">creators</td><td align="center">effect</td></tr><tr><td align="center">é€šè®¯è¯·æ±‚ä¿®æ”¹çŠ¶æ€å‡½æ•°</td><td align="center">dispatch</td><td align="center">dispatch</td></tr><tr><td align="center">é€šè®¯è¯·æ±‚è·å–çŠ¶æ€å‡½æ•°</td><td align="center">connect</td><td align="center">connect</td></tr><tr><td align="center">ä»æºè·å–æ•°æ®</td><td align="center">æ— </td><td align="center">subscription</td></tr></tbody></table><h5 id="æ•°æ®æµå‘"><a href="#æ•°æ®æµå‘" class="headerlink" title="æ•°æ®æµå‘"></a>æ•°æ®æµå‘</h5><p><img src="D:\webstorm\typora\images\image-20231213114316919.png" alt="image-20231213114316919"></p><h5 id="ä½¿ç”¨ï¼šå…¨å±€å±€éƒ¨"><a href="#ä½¿ç”¨ï¼šå…¨å±€å±€éƒ¨" class="headerlink" title="ä½¿ç”¨ï¼šå…¨å±€å±€éƒ¨"></a>ä½¿ç”¨ï¼šå…¨å±€å±€éƒ¨</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å…¨å±€çš„æ•°æ®</span></span><br><span class="line">åœ¨ src ä¸‹çš„modelsæ–‡ä»¶å¤¹</span><br><span class="line">è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹çš„æ‰€æœ‰jsæ–‡ä»¶éƒ½ä¼šè®¤ä¸ºæ˜¯å…¬å…±çš„å…¨å±€çš„æ•°æ®</span><br><span class="line"><span class="comment">//  1ï¼Œå»ºç«‹å¯¹åº”çš„æ¨¡å—ã€‚ä¾‹ï¼šglobal.js   å¯¹å¤–æš´éœ²ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">namespace</span>: <span class="string">&#x27;æ–‡ä»¶åå³å¯&#x27;</span>ï¼Œ  <span class="comment">// ä¸å…è®¸é‡å</span></span><br><span class="line">    <span class="attr">state</span>: &#123;<span class="comment">// åˆå§‹åŒ–å…¨å±€æ•°æ®</span></span><br><span class="line">    <span class="attr">title</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">text</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">login</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">a</span>: <span class="string">&#x27;å…¨å±€&#x27;</span></span><br><span class="line">&#125;,</span><br><span class="line">    <span class="attr">reducers</span>: &#123;<span class="comment">// reducers å¤„ç†åŒæ­¥ä¸šåŠ¡</span></span><br><span class="line">        <span class="title function_">setText</span>(<span class="params">state, action</span>) &#123;     <span class="comment">// action æ¥æ”¶çš„å‚æ•°ï¼Œaction.payload</span></span><br><span class="line">            <span class="comment">// æ›´æ–°å¹¶è¿”å›ä¿®æ”¹åçš„æ•°æ®</span></span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                ...state,</span><br><span class="line">                <span class="attr">text</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">effects</span>: &#123;<span class="comment">// effects å¤„ç†å¼‚æ­¥ä¸šåŠ¡   çŠ¶æ€æœºå‡½æ•°ï¼Ÿï¼Ÿï¼Ÿ</span></span><br><span class="line">        *<span class="title function_">login</span>(<span class="params"> action, &#123; call, put, select &#125;</span>) &#123;      <span class="comment">// action.payload æ¥æ”¶çš„å‚æ•°ï¼Œå¯ä»¥è§£æ„ &#123; payload &#125;</span></span><br><span class="line">            <span class="keyword">const</span> data = <span class="keyword">yield</span> <span class="title function_">call</span>(request, &#123; payload &#125;);   <span class="comment">// call() è§¦å‘å¼‚æ­¥è¯·æ±‚ select() ä»ä¸Šé¢çš„å…¬å…±ä»“åº“è·å–</span></span><br><span class="line">            <span class="keyword">yield</span> <span class="title function_">put</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;&#x27;</span>, <span class="attr">payload</span>: data &#125;)<span class="comment">//  put() å¼‚æ­¥å–å›æ•°æ®åï¼Œè°ƒç”¨reduceråŒæ­¥ä¿®æ”¹æ•°æ®ï¼Œæ•°æ®</span></span><br><span class="line">        &#125;                                                   <span class="comment">// yield ç±»ä¼¼äºawait</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2ï¼Œåœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line">å¯¼å…¥ connect</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span></span><br><span class="line">åœ¨æš´éœ²ç»„ä»¶æ—¶ï¼Œå¯¹ç»„ä»¶è¿›è¡Œä¿®é¥°</span><br><span class="line"><span class="keyword">const</span> ç»„ä»¶å(props) &#123;&#125;   <span class="comment">// props æ¥æ”¶state</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">connect</span>( <span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="comment">// å–å…¨å±€ï¼Œ é‡å‘½åå±æ€§å</span></span><br><span class="line">    <span class="attr">text</span>: state.<span class="property">golbal</span>.<span class="property">text</span>,</span><br><span class="line">&#125;) )( ç»„ä»¶å );</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3ï¼Œdispatch è§¦å‘</span></span><br><span class="line">props.<span class="title function_">dispatch</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;æ¨¡å—å(å‘½åç©ºé—´) / æŸä¸€ä¸ªæ–¹æ³•&#x27;</span>ï¼Œ</span><br><span class="line">    <span class="attr">payload</span>: &#123;&#125;,  <span class="comment">// å‚æ•°ä¼šåœ¨å‡½æ•°çš„ action.payload ä¸­</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å±€éƒ¨çš„æ•°æ®</span></span><br><span class="line">å¦‚æœé¡µé¢çš„æ•°æ®ä¸å¤šï¼Œå¯ä»¥å»ºä¸€ä¸ªé¡µé¢ç‹¬äº«çš„æ•°æ®ï¼Œåœ¨pageså½“å‰é¡µé¢çš„model.<span class="property">js</span></span><br><span class="line">å¦‚æœé¡µé¢æ•°æ®å¾ˆå¤šï¼Œä¹Ÿå¯ä»¥å»ºä¸€ä¸ªmodelsæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾å¤šä¸ªæ¨¡å—æ•°æ®</span><br><span class="line">å½“å‰çš„é¡µé¢æ˜¯å¯ä»¥å‘ä¸Šè®¿é—®å…¨å±€æ•°æ®çš„ï¼Œä½†ä¸èƒ½å‘ä¸‹è®¿é—®ã€‚</span><br><span class="line"><span class="comment">// model.jsä¸­</span></span><br><span class="line">å¯¹å¤–æš´éœ²ä¸€ä¸ªå¯¹è±¡</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">namespace</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="attr">state</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">reducers</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">effects</span>: &#123;&#125;,</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»„ä»¶ä¸­ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">connect</span>( <span class="function">(<span class="params">state</span>) =&gt;</span> (&#123;</span><br><span class="line">    <span class="comment">// å–å±€éƒ¨model</span></span><br><span class="line">    <span class="attr">namespace</span>: state.<span class="property">golbal</span>.<span class="property">text</span>,</span><br><span class="line">&#125;) )( ç»„ä»¶å );</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// connect æŠŠmodelå’Œcomponent è¿æ¥èµ·æ¥</span></span><br><span class="line"><span class="comment">// dva æä¾›äº† connect æ–¹æ³•ã€‚å¦‚æœä½ ç†Ÿæ‚‰ reduxï¼Œè¿™ä¸ª connect å°±æ˜¯ react-redux çš„ connect</span></span><br><span class="line">ä¾‹ï¼š</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">connect</span>(<span class="function">(<span class="params">&#123; products &#125;</span>) =&gt;</span> (&#123;</span><br><span class="line">  products,</span><br><span class="line">&#125;))(<span class="title class_">Products</span>);</span><br><span class="line"></span><br><span class="line">@connectè¯­æ³•ç³–</span><br><span class="line"><span class="keyword">import</span> &#123; connect &#125; <span class="keyword">from</span> <span class="string">&#x27;dva&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">mapStateToProps</span>(<span class="params">state</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> &#123; <span class="attr">todos</span>: state.<span class="property">todos</span> &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">connect</span>(mapStateToProps)(<span class="title class_">App</span>);</span><br><span class="line"><span class="comment">// connect æ–¹æ³•è¿”å›çš„ä¹Ÿæ˜¯ä¸€ä¸ª React ç»„ä»¶ï¼Œé€šå¸¸ç§°ä¸ºå®¹å™¨ç»„ä»¶ã€‚å› ä¸ºå®ƒæ˜¯åŸå§‹ UI ç»„ä»¶çš„å®¹å™¨ï¼Œå³åœ¨å¤–é¢åŒ…äº†ä¸€å±‚ Stateã€‚</span></span><br><span class="line"><span class="comment">// connect æ–¹æ³•ä¼ å…¥çš„ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ mapStateToProps å‡½æ•°ï¼ŒmapStateToProps å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºå»ºç«‹ State åˆ° Props çš„æ˜ å°„å…³ç³»</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸¢å¼ƒconnect</span></span><br><span class="line">å¦‚æœæ˜¯å­ç»„ä»¶ä¸­ä¹Ÿä½¿ç”¨æ•°æ®ï¼Œä¸å¿…ç”¨connect</span><br><span class="line"><span class="number">1</span>ï¼Œè·å–dispatch</span><br><span class="line"><span class="keyword">import</span> &#123; useDispatch, useSelector &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span></span><br><span class="line"><span class="keyword">const</span> dispatch = <span class="title function_">useDispatch</span>();        <span class="comment">// ç”¨äºè§¦å‘åŒæ­¥æˆ–å¼‚æ­¥æ¥ä¿®æ”¹æ•°æ®</span></span><br><span class="line"><span class="number">2</span>, è·å–æ•°æ®</span><br><span class="line"><span class="keyword">const</span> &#123; namespace.<span class="property">state</span> &#125; = <span class="title function_">useSelector</span>( <span class="function">() =&gt;</span> (&#123; namespace &#125;) )</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// subscriptions</span></span><br><span class="line">å®šä¹‰æ•°æ®æºçš„å˜åŒ–ï¼Œ</span><br><span class="line">æ”¶çº³ä¸€äº›è‡ªå®šä¹‰å‡½æ•°</span><br><span class="line"><span class="title function_">fn</span>(<span class="params">&#123; dispatch, history &#125;</span>) &#123; <span class="comment">// ä¸šåŠ¡é€»è¾‘ &#125;</span></span><br></pre></td></tr></table></figure><h5 id="action"><a href="#action" class="headerlink" title="action"></a>action</h5><blockquote><p>æ˜¯ä¸€ä¸ªjså¯¹è±¡ã€‚æ”¹å˜stateçš„å”¯ä¸€é€”å¾„ã€‚</p><p>actionå¿…é¡»å¸¦typeå±æ€§æŒ‡æ˜è¡Œä¸ºï¼Œå‘èµ·actionéœ€ç”¨dispatchå‡½æ•°</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ <code>dispatch</code> æ˜¯åœ¨ç»„ä»¶ connect Modelsä»¥åï¼Œé€šè¿‡ props ä¼ å…¥çš„ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">dispatch</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;add&#x27;</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="dispatch-å‡½æ•°"><a href="#dispatch-å‡½æ•°" class="headerlink" title="dispatch å‡½æ•°"></a>dispatch å‡½æ•°</h5><blockquote><p> dipatch å¯ä»¥çœ‹ä½œæ˜¯è§¦å‘è¿™ä¸ªè¡Œä¸ºçš„æ–¹å¼ï¼Œè€Œ Reducer åˆ™æ˜¯æè¿°å¦‚ä½•æ”¹å˜æ•°æ®çš„ã€‚</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">dispatch</span>(&#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="string">&#x27;user/add&#x27;</span>, <span class="comment">// å¦‚æœåœ¨ model å¤–è°ƒç”¨ï¼Œéœ€è¦æ·»åŠ  namespace</span></span><br><span class="line">  <span class="attr">payload</span>: &#123;&#125;, <span class="comment">// éœ€è¦ä¼ é€’çš„ä¿¡æ¯</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h5 id="Effect"><a href="#Effect" class="headerlink" title="Effect"></a>Effect</h5><blockquote><p>Action å¤„ç†å™¨ï¼Œå¤„ç†å¼‚æ­¥åŠ¨ä½œï¼ŒåŸºäº Redux-saga å®ç°ã€‚Effect æŒ‡çš„æ˜¯å‰¯ä½œç”¨ã€‚æ ¹æ®å‡½æ•°å¼ç¼–ç¨‹ï¼Œè®¡ç®—ä»¥å¤–çš„æ“ä½œéƒ½å±äº Effectï¼Œå…¸å‹çš„å°±æ˜¯ I&#x2F;O æ“ä½œã€æ•°æ®åº“è¯»å†™ã€‚</p><p>Effect æ˜¯ä¸€ä¸ª Generator å‡½æ•°ï¼Œå†…éƒ¨ä½¿ç”¨ yield å…³é”®å­—ï¼Œæ ‡è¯†æ¯ä¸€æ­¥çš„æ“ä½œï¼ˆä¸ç®¡æ˜¯å¼‚æ­¥æˆ–åŒæ­¥ï¼‰ã€‚</p><p>dva æä¾›å¤šä¸ª effect å‡½æ•°å†…éƒ¨çš„å¤„ç†å‡½æ•°ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„æ˜¯ <code>call</code> å’Œ <code>put</code>ã€‚</p><ul><li>callï¼šæ‰§è¡Œå¼‚æ­¥å‡½æ•°</li><li>putï¼šå‘å‡ºä¸€ä¸ª Actionï¼Œç±»ä¼¼äº dispatch</li></ul></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> *<span class="title function_">addAfter1Second</span>(<span class="params">action, &#123; put, call &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="title function_">call</span>(delay, <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">yield</span> <span class="title function_">put</span>(&#123; <span class="attr">type</span>: <span class="string">&#x27;add&#x27;</span> &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="dvaçš„å‡ ä¸ªè§„åˆ™"><a href="#dvaçš„å‡ ä¸ªè§„åˆ™" class="headerlink" title="dvaçš„å‡ ä¸ªè§„åˆ™:"></a>dvaçš„å‡ ä¸ªè§„åˆ™:</h5><p>1ã€é€šè¿‡dispatchè°ƒç”¨namespace&#x2F;effects<br>2ã€state(çŠ¶æ€)<br>3ã€effects (å¼‚æ­¥æ“ä½œ)</p><p>- å‡½æ•°å¿…é¡»å¸¦*ï¼Œä¹Ÿå°±æ˜¯ç”Ÿæˆå™¨ã€‚<br>- ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¯ä»¥æ‹“å±•ä¸º{payload, callback}<br>- ç¬¬äºŒä¸ªå‚æ•°ï¼Œcallå’Œput<br>- call å°±æ˜¯è°ƒç”¨ asyncçš„actionå‡½æ•°<br>- putå°±æ˜¯è°ƒç”¨reducersçš„å‡½æ•°æ¥æ›´æ–°stateã€‚</p><p>4ã€reducers</p><p>5ã€dvaæ˜¯ä»¥modelä¸ºå•ä½çš„ï¼Œæ‰€æœ‰çš„åº”ç”¨é€»è¾‘éƒ½åœ¨ä¸Šé¢</p><h3 id="è¿è¡Œæ—¶é…ç½®-1"><a href="#è¿è¡Œæ—¶é…ç½®-1" class="headerlink" title="è¿è¡Œæ—¶é…ç½®"></a>è¿è¡Œæ—¶é…ç½®</h3><ol><li><p>æ¸²æŸ“å‰çš„æƒé™æ ¡éªŒ</p></li><li><p>åŠ¨æ€è·¯ç”±è¯»å–ã€æ·»åŠ </p></li><li><p>è·¯ç”±ç›‘å¬ï¼ŒåŸ‹ç‚¹ç»Ÿè®¡</p></li><li><p>æ‹¦æˆªå™¨</p></li></ol><h3 id="ç»„ä»¶æƒé™"><a href="#ç»„ä»¶æƒé™" class="headerlink" title="ç»„ä»¶æƒé™"></a>ç»„ä»¶æƒé™</h3><p>é…ç½®å¼€å¯ã€‚åŒæ—¶éœ€è¦ <code>src/access.ts</code> æä¾›æƒé™é…ç½®ã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">access</span>: &#123;&#125;,</span><br><span class="line">  <span class="comment">// access æ’ä»¶ä¾èµ– initial State æ‰€ä»¥éœ€è¦åŒæ—¶å¼€å¯</span></span><br><span class="line">  <span class="attr">initialState</span>: &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æˆ‘ä»¬çº¦å®šäº† src/access.ts ä¸ºæˆ‘ä»¬çš„æƒé™å®šä¹‰æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶éœ€è¦é»˜è®¤å¯¼å‡ºä¸€ä¸ªæ–¹æ³•ï¼Œå¯¼å‡ºçš„æ–¹æ³•ä¼šåœ¨é¡¹ç›®åˆå§‹åŒ–æ—¶è¢«æ‰§è¡Œã€‚è¯¥æ–¹æ³•éœ€è¦è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„æ¯ä¸€ä¸ªå€¼å°±å¯¹åº”å®šä¹‰äº†ä¸€æ¡æƒé™ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</span></span><br><span class="line"><span class="comment">// src/access.ts</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> (<span class="params">initialState</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; userId, role &#125; = initialState;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">canReadFoo</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">canUpdateFoo</span>: role === <span class="string">&#x27;admin&#x27;</span>,</span><br><span class="line">    <span class="attr">canDeleteFoo</span>: <span class="function">(<span class="params">foo</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> foo.<span class="property">ownerId</span> === userId;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="API"><a href="#API" class="headerlink" title="API"></a>API</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">useAccess</span><br><span class="line"><span class="comment">//æˆ‘ä»¬æä¾›äº†ä¸€ä¸ª Hooks ç”¨äºåœ¨ç»„ä»¶ä¸­è·å–æƒé™ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤º</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useAccess &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">PageA</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; foo &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> access = <span class="title function_">useAccess</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (access.<span class="property">canReadFoo</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå¯ä»¥è¯»å– Fooï¼Œåˆ™...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;&gt;</span>TODO<span class="tag">&lt;/&gt;</span></span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">PageA</span>;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é…åˆ Access ç»„ä»¶å¯ä»¥å¾ˆç®€å•çš„å®ç°é¡µé¢å†…çš„å…ƒç´ çš„æƒé™æ§åˆ¶ã€‚</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; useAccess, <span class="title class_">Access</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">PageA</span> = (<span class="params">props</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; foo &#125; = props;</span><br><span class="line">  <span class="keyword">const</span> access = <span class="title function_">useAccess</span>(); <span class="comment">// access çš„æˆå‘˜: canReadFoo, canUpdateFoo, canDeleteFoo</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (access.<span class="property">canReadFoo</span>) &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœå¯ä»¥è¯»å– Fooï¼Œåˆ™...</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">Access</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">accessible</span>=<span class="string">&#123;access.canReadFoo&#125;</span>         // <span class="attr">æ˜¯å¦æœ‰æƒé™</span>ï¼Œ<span class="attr">é€šå¸¸é€šè¿‡</span> <span class="attr">useAccess</span> <span class="attr">è·å–åä¼ å…¥è¿›æ¥</span>ã€‚</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">        <span class="attr">fallback</span>=<span class="string">&#123;</span>&lt;<span class="attr">div</span>&gt;</span>Can not read foo content.<span class="tag">&lt;/<span class="name">div</span>&gt;</span> &#125;       / //æ— æƒé™æ—¶çš„æ˜¾ç¤ºï¼Œé»˜è®¤æ— æƒé™ä¸æ˜¾ç¤ºä»»ä½•å†…å®¹ã€‚</span></span><br><span class="line"><span class="language-xml">      &gt;</span></span><br><span class="line"><span class="language-xml">        Foo content.</span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;/<span class="name">Access</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// optimus-ui/access.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> initialState =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123; initFunctions, currentUser &#125; = initialState;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">      routePath is not required, if not provided, the key will be used as pathname</span></span><br><span class="line"><span class="comment">      when routePath has variable ex: /xxx/xxx/:externalRef, routePath must be provided</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">      parent Component ex:</span></span><br><span class="line"><span class="comment">        import &#123; useRouteMatch &#125; from &#x27;umi&#x27;</span></span><br><span class="line"><span class="comment">        const &#123; path &#125; = useRouteMatch();</span></span><br><span class="line"><span class="comment">        checkPermission(key, path))</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="attr">checkPermission</span>: <span class="function">(<span class="params">key, routePath = <span class="literal">undefined</span></span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> path = routePath || <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span>;</span><br><span class="line">      <span class="keyword">const</span> groups = currentUser[<span class="string">&#x27;cognito:groups&#x27;</span>] || [];</span><br><span class="line">      <span class="keyword">if</span> (groups.<span class="title function_">includes</span>(<span class="string">&#x27;Administrator&#x27;</span>) || groups.<span class="title function_">includes</span>(<span class="string">&#x27;admin&#x27;</span>)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (initFunctions <span class="keyword">instanceof</span> <span class="title class_">Map</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> keys = initFunctions.<span class="title function_">get</span>(path);</span><br><span class="line">        <span class="keyword">if</span> (<span class="title class_">Array</span>.<span class="title function_">isArray</span>(keys) &amp;&amp; keys.<span class="title function_">includes</span>(key)) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> umi </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆå­¦react</title>
      <link href="/2024/03/15/chu-xue-react/"/>
      <url>/2024/03/15/chu-xue-react/</url>
      
        <content type="html"><![CDATA[<p><img src="D:\webstorm\typora\images\image-20231112234525576.png" alt="image-20231112234525576"></p><h1 id="Reactä»‹ç»"><a href="#Reactä»‹ç»" class="headerlink" title="Reactä»‹ç»"></a>Reactä»‹ç»</h1><p>ç”±Metaå…¬å¸ï¼ˆfacebookï¼‰ç ”å‘ï¼Œæ˜¯ä¸€ä¸ªç”¨äº    æ„å»ºWebï¼ˆç½‘é¡µï¼‰    å’Œ   åŸç”Ÿäº¤äº’ç•Œé¢ ï¼ˆiosæˆ–è€…Androidï¼‰    çš„åº“</p><h3 id="Reactä¼˜åŠ¿ï¼ˆæµè¡Œï¼‰"><a href="#Reactä¼˜åŠ¿ï¼ˆæµè¡Œï¼‰" class="headerlink" title="Reactä¼˜åŠ¿ï¼ˆæµè¡Œï¼‰"></a>Reactä¼˜åŠ¿ï¼ˆæµè¡Œï¼‰</h3><p>ç›¸å¯¹äºä¼ ç»ŸåŸºäºDOMå¼€å‘çš„ä¼˜åŠ¿ï¼šç»„ä»¶åŒ–çš„å¼€å‘æ–¹å¼ï¼Œä¸é”™çš„æ€§èƒ½ï¼ˆä¼ ç»Ÿçš„Domæ€§èƒ½å·®ï¼‰</p><p>ç›¸è¾ƒäºå…¶å®ƒå‰ç«¯æ¡†æ¶çš„ä¼˜åŠ¿ï¼šä¸°å¯Œçš„ç”Ÿæ€æ˜¯æ‰€æœ‰æ¡†æ¶ä¸­æœ€å¥½çš„ï¼ˆVueï¼ŒAngularï¼‰ï¼Œè·¨å¹³å°ï¼ˆæ„å»ºwebï¼ŒåŸç”Ÿappï¼‰ï¼Œ</p><h1 id="Reactå¼€å‘ç¯å¢ƒæ­å»º"><a href="#Reactå¼€å‘ç¯å¢ƒæ­å»º" class="headerlink" title="Reactå¼€å‘ç¯å¢ƒæ­å»º"></a>Reactå¼€å‘ç¯å¢ƒæ­å»º</h1><h3 id="ä½¿ç”¨create-react-appå¿«é€Ÿæ­å»ºå¼€å‘ç¯å¢ƒ"><a href="#ä½¿ç”¨create-react-appå¿«é€Ÿæ­å»ºå¼€å‘ç¯å¢ƒ" class="headerlink" title="ä½¿ç”¨create-react-appå¿«é€Ÿæ­å»ºå¼€å‘ç¯å¢ƒ"></a>ä½¿ç”¨create-react-appå¿«é€Ÿæ­å»ºå¼€å‘ç¯å¢ƒ</h3><p>create-react-appæ˜¯ä¸€ä¸ªå¿«é€Ÿ   åˆ›å»ºReactå¼€å‘ç¯å¢ƒ  çš„å·¥å…·ï¼Œåº•å±‚ç”±Webpackæ„å»ºï¼Œå°è£…äº†é…ç½®ç»†èŠ‚ï¼Œå¼€ç®±å³ç”¨</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npx create-react-app react-basic</span><br><span class="line"><span class="comment">// npx   Node.jså·¥å…·å‘½ä»¤ï¼ŒæŸ¥æ‰¾å¹¶æ‰§è¡Œåç»­çš„åŒ…å‘½ä»¤</span></span><br><span class="line"><span class="comment">// create-react-app     æ ¸å¿ƒåŒ…(å›ºå®šå†™æ³•)ï¼Œç”¨äºåˆ›å»ºReacté¡¹ç›®</span></span><br><span class="line"><span class="comment">// é¡¹ç›®åï¼ˆè‡ªå®šä¹‰ï¼‰</span></span><br><span class="line">npm start    <span class="comment">// å¯åŠ¨é¡¹ç›®</span></span><br></pre></td></tr></table></figure><p>å®˜ç½‘ï¼š<a href="https://zh-hans.react.dev/learn/start-a-new-react-project">https://zh-hans.react.dev/learn/start-a-new-react-project</a></p><img src="D:\webstorm\typora\images\image-20231113001302857.png" alt="image-20231113001302857" style="zoom: 67%;" /><p>é¡¹ç›®ç›®å½•ï¼špackage.json   é¡¹ç›®é…ç½®æ–‡ä»¶ï¼šdependenciesæ ¸å¿ƒåŒ…ï¼Œè‡ªå®šä¹‰å‘½ä»¤ï¼Œ</p><p>â€‹src æºç ç›®å½•   åˆ›å»ºé¡¹ç›®åªä¿ç•™ä¸¤ä¸ªæ–‡ä»¶ï¼š App.js   å’Œ  index.jsï¼ˆé¡¹ç›®å…¥å£æ–‡ä»¶ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// index.js é¡¹ç›®çš„å…¥å£æ–‡ä»¶    å…¶ä»–æ–‡ä»¶å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ï¼Œå¹¶å°†æœ€ç»ˆæˆæœæ³¨å…¥ public æ–‡ä»¶å¤¹é‡Œé¢çš„ index.html ä¸­</span></span><br><span class="line"><span class="comment">// å†æ¸…ç†index.jsæ–‡ä»¶ä¸­ä¸éœ€è¦çš„éƒ¨åˆ†   å†æ¸…app.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ï¼ˆæœ€æ ¸å¿ƒçš„ä¸¤ä¸ªåŒ…ï¼šreactï¼Œreact-domï¼‰</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">ReactDOM</span> <span class="keyword">from</span> <span class="string">&#x27;react-dom/client&#x27;</span>;</span><br><span class="line"><span class="comment">// é¡¹ç›®çš„æ ¹ç»„ä»¶</span></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">App</span> <span class="keyword">from</span> <span class="string">&#x27;./App&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŠŠ  Appæ ¹ç»„ä»¶  æ¸²æŸ“åˆ°  idä¸ºroot  çš„domèŠ‚ç‚¹ä¸Š</span></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.jsé¡¹ç›®çš„æ ¹ç»„ä»¶</span></span><br><span class="line"><span class="comment">// app.jsçš„å¼•å…¥åˆ°index.js,è¢«ä¸€äº›æ ¸å¿ƒä»£ç æ¸²æŸ“åˆ°publicé‡Œé¢çš„index.htmlï¼ˆrootçš„divä¸Šï¼‰</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      this is react</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">App</span>;</span><br></pre></td></tr></table></figure><h1 id="JSX"><a href="#JSX" class="headerlink" title="JSX"></a>JSX</h1><p>æ¦‚å¿µï¼šJSXæ˜¯ JavaScript å’Œ  XML  (HTML)  çš„ç¼©å†™ï¼Œè¡¨ç¤ºåœ¨ JSä»£ç ä¸­ç¼–å†™HTMLæ¨¡ç‰ˆç»“æ„ ,  å®ƒæ˜¯Reactä¸­   ç¼–å†™UIæ¨¡ç‰ˆ  çš„æ–¹å¼</p><p>ä¼˜åŠ¿ï¼š1ï¼Œhtmlçš„å£°æ˜å¼æ¨¡æ¿è¯­æ³•    2ï¼Œjsçš„å¯ç¼–ç¨‹èƒ½åŠ›</p><p>jsxçš„æœ¬è´¨ï¼šjSX ä¸æ˜¯æ ‡å‡†çš„]Sè¯­æ³•ï¼Œæ˜¯]5çš„è¯­æ³•æ‰©å±•ï¼Œæµè§ˆå™¨æœ¬èº«ä¸èƒ½è¯†åˆ«ï¼Œéœ€è¦é€šè¿‡è§£æå·¥å…·ï¼ˆbabelï¼‰åšè§£æä¹‹åæ‰èƒ½åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ</p><p><img src="D:\webstorm\typora\images\image-20231113235316257.png" alt="image-20231113235316257"></p><h3 id="è¯†åˆ«jsè¡¨è¾¾å¼"><a href="#è¯†åˆ«jsè¡¨è¾¾å¼" class="headerlink" title="è¯†åˆ«jsè¡¨è¾¾å¼"></a>è¯†åˆ«jsè¡¨è¾¾å¼</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app.js</span></span><br><span class="line"><span class="comment">// åœ¨ jSX ä¸­å¯ä»¥é€šè¿‡ &#123;&#125; å¤§æ‹¬å·è¯­æ³•è¯†åˆ« JavaScript ä¸­çš„è¡¨è¾¾å¼ï¼Œæ¯”å¦‚å¸¸è§çš„å˜é‡ã€å‡½æ•°è°ƒç”¨ã€æ–¹æ³•è°ƒç”¨ç­‰ç­‰</span></span><br><span class="line"><span class="comment">// jsx é€šè¿‡</span></span><br><span class="line"><span class="comment">// React ç»„ä»¶å¿…é¡»è¿”å›å•ä¸ª JSX å…ƒç´   æœ€å¤–è¾¹åªèƒ½æœ‰ä¸€å±‚div</span></span><br><span class="line"><span class="comment">// ç»„ä»¶ä»¥å¤§å†™å­—æ¯å¼€å¤´</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">className</span>=<span class="string">&quot;App&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      this is react</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      // 1ï¼Œä½¿ç”¨å¼•å·ä¼ é€’å­—ç¬¦ä¸²</span></span><br><span class="line"><span class="language-xml">      &#123;â€˜this is reactâ€™&#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      // 2ï¼Œä½¿ç”¨javascriptå˜é‡</span></span><br><span class="line"><span class="language-xml">  &#123; sum &#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      // 3ï¼Œå‡½æ•°è°ƒç”¨å’Œæ–¹æ³•è°ƒç”¨</span></span><br><span class="line"><span class="language-xml">      &#123; get() &#125;</span></span><br><span class="line"><span class="language-xml">      &#123; new Date().getDate() &#125;</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">      // 4ï¼Œä½¿ç”¨å¯¹è±¡</span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;</span> &#123; <span class="attr">color</span>=<span class="string">&#x27;red&#x27;</span>&#125; &#125;&gt;</span>this is react<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//  æ³¨æ„: ifè¯­å¥ã€switchè¯­å¥ã€å˜é‡å£°æ˜å±äºè¯­å¥ï¼Œä¸æ˜¯è¡¨è¾¾å¼ï¼Œä¸èƒ½å‡ºç°åœ¨&#123;&#125;ä¸­</span></span><br></pre></td></tr></table></figure><h3 id="å®ç°åˆ—è¡¨æ¸²æŸ“ï¼ˆè¦æœ‰keyå±æ€§ï¼‰"><a href="#å®ç°åˆ—è¡¨æ¸²æŸ“ï¼ˆè¦æœ‰keyå±æ€§ï¼‰" class="headerlink" title="å®ç°åˆ—è¡¨æ¸²æŸ“ï¼ˆè¦æœ‰keyå±æ€§ï¼‰"></a>å®ç°åˆ—è¡¨æ¸²æŸ“ï¼ˆè¦æœ‰keyå±æ€§ï¼‰</h3><p>åŸç”Ÿjsä¸­mapæ–¹æ³•</p><h3 id="æ¡ä»¶æ¸²æŸ“"><a href="#æ¡ä»¶æ¸²æŸ“" class="headerlink" title="æ¡ä»¶æ¸²æŸ“"></a>æ¡ä»¶æ¸²æŸ“</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ç®€å•æ¡ä»¶æ¸²æŸ“</span><br><span class="line">é€»è¾‘ä¸ &amp;&amp;                 <span class="comment">// åªæ§åˆ¶ä¸€ä¸ªå…ƒç´ çš„æ˜¾ç¤ºéšè—</span></span><br><span class="line"> &#123; isLogin &amp;&amp;  <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>Â  Â woshispanÂ  Â Â <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span> &#125;</span><br><span class="line">ä¸‰å…ƒè¡¨è¾¾å¼              <span class="comment">// æ§åˆ¶ä¸¤ä¸ªå…ƒç´ æ¥å›åˆ‡æ¢</span></span><br><span class="line">isLogin ? <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span> loading <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span> : <span class="language-xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span> woshisapna <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">  å¤æ‚æ¡ä»¶æ¸²æŸ“</span><br><span class="line">  <span class="comment">// æ ¹æ®ä¸åŒçš„çŠ¶æ€åœºæ™¯æ˜¾ç¤ºä¸åŒçš„æ¨¡å¼</span></span><br><span class="line">  æ–¹æ¡ˆï¼šè‡ªå®šä¹‰å‡½æ•° + <span class="keyword">if</span>åˆ¤æ–­</span><br></pre></td></tr></table></figure><h3 id="å“åº”äº‹ä»¶"><a href="#å“åº”äº‹ä»¶" class="headerlink" title="å“åº”äº‹ä»¶"></a>å“åº”äº‹ä»¶</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨ç»„ä»¶ä¸­å£°æ˜  äº‹ä»¶å¤„ç†  å‡½æ•°æ¥å“åº”äº‹ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">alert</span>(<span class="string">&#x27;You clicked me!&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">    <span class="comment">// è·å–äº‹ä»¶å½¢å‚e</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params">e</span>) &#123;</span><br><span class="line">      <span class="title function_">log</span>(<span class="string">&#x27;ç‚¹å‡»äº†&#x27;</span>,e)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¯­æ³•ï¼š onäº‹ä»¶å=&#123; äº‹ä»¶å¤„ç†å‡½æ•°å &#125;     é©¼å³°å‘½å</span></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span>    // æ²¡æœ‰å°æ‹¬å·</span></span><br><span class="line"><span class="language-xml">      Click me</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">// å¦‚æœæƒ³ä¼ é€’è‡ªå®šä¹‰å‚æ•°ï¼Œ è¦æ”¹é€ æˆç®­å¤´å‡½æ•°å¼•ç”¨   å°±åƒ onClick=&#123; () =&gt; &#123;handleClick( å‚æ•° )&#125; &#125;  åœ¨ç®­å¤´ä¸­è°ƒè¿™ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;</span> () =&gt;</span> handleClick( å‚æ•° ) &#125;&gt;     <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">//åŒæ—¶ä¼ é€’äº‹ä»¶å¯¹è±¡e å’Œ å½¢å‚</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params">å‚æ•°, e</span>) &#123;&#125;</span><br><span class="line">&lt;button onClick=&#123; <span class="function">(<span class="params">e</span>) =&gt;</span> <span class="title function_">handleClick</span>( å‚æ•°, e ) &#125; &gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ç»„ä»¶"><a href="#ç»„ä»¶" class="headerlink" title="ç»„ä»¶"></a>ç»„ä»¶</h3><p>ï¼ˆé¦–å­—æ¯å¤§å†™å‡½æ•°ï¼ŒUIç•Œé¢çš„ä¸€éƒ¨åˆ†ï¼Œå¯ä»¥åµŒå¥—ï¼Œå¤ç”¨ï¼Œæœ‰è‡ªå·±çš„é€»è¾‘å’Œå¤–è§‚ ï¼‰</p><p>å¸¸è§„å‡½æ•° function  Button()  {}</p><p>ç®­å¤´å‡½æ•° const    Button  &#x3D; ï¼ˆï¼‰&#x3D;&gt;    {}</p><h3 id="usestate"><a href="#usestate" class="headerlink" title="usestate"></a>usestate</h3><p>æ·»åŠ çŠ¶æ€å˜é‡ï¼ˆæ•°æ®é©±åŠ¨è§†å›¾ï¼‰</p><p>usestate ä¿®æ”¹çŠ¶æ€çš„è§„åˆ™ï¼šçŠ¶æ€ä¸å¯å˜</p><p>â€‹reactä¸­ï¼ŒçŠ¶æ€è¢«è®¤ä¸ºæ˜¯åªè¯»çš„ï¼Œå¦‚æœæƒ³è¦ä¿®æ”¹ï¼Œåº”è¯¥æ˜¯æ›¿æ¢æ‰ï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ï¼Œç›´æ¥æ”¹çš„è¯ä¸èƒ½å¼•èµ·è¯•å›¾æ›´æ–°</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¦–å…ˆï¼Œä» React å¼•å…¥ useStateæ˜¯ä¸€ä¸ªå‡½æ•°</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"><span class="comment">// ç»„ä»¶ä¸­å£°æ˜ä¸€ä¸ª state å˜é‡</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">  <span class="comment">// ...å½“å‰å€¼  count     ç”¨äºæ›´æ–°å®ƒçš„å‡½æ•°ï¼ˆsetCountï¼‰    useState(0)é‡Œé¢ä¼ çš„æ˜¯åˆå§‹å€¼</span></span><br><span class="line">    <span class="comment">// å‘½åè§„åˆ™ [something, setSomething] è¿™æ ·ä¸ºå®ƒä»¬å‘½å</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//   ä¿®æ”¹å¤æ‚çŠ¶æ€ï¼ˆå¯¹è±¡ï¼‰çš„æƒ…å†µ</span></span><br><span class="line">setForm  &#123; ...åŸæœ¬çš„å¯¹è±¡ï¼Œnameï¼š<span class="string">&#x27; john &#x27;</span> &#125; ï¼‰   <span class="comment">//   å±•å¼€åŸæ¥çš„å¯¹è±¡ï¼Œåè¾¹è¾“å…¥æ–°çš„å±æ€§æˆ–æ–¹æ³•ï¼Œæœ‰çš„å°±æ›¿æ¢ï¼Œæ²¡æœ‰å°±æ˜¯æ·»åŠ </span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç¬¬ä¸€æ¬¡æ˜¾ç¤ºæŒ‰é’®æ—¶ï¼Œcount çš„å€¼ä¸º 0ï¼Œå› ä¸ºä½ æŠŠ 0 ä¼ ç»™äº† useState()ã€‚</span></span><br><span class="line"><span class="comment">// å½“ä½ æƒ³æ”¹å˜ state æ—¶ï¼Œè°ƒç”¨ setCount() å¹¶å°†æ–°çš„å€¼ä¼ é€’ç»™å®ƒã€‚ç‚¹å‡»è¯¥æŒ‰é’®è®¡æ•°å™¨å°†é€’å¢</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      Clicked &#123;count&#125; times</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°è¯•å¤šæ¬¡æ¸²æŸ“  åŒä¸€ä¸ªç»„ä»¶ï¼Œ æ¯ä¸ªç»„ä»¶éƒ½ä¼šæ‹¥æœ‰è‡ªå·±çš„ stateã€‚ ä½ å¯ä»¥å°è¯•ç‚¹å‡»ä¸åŒçš„æŒ‰é’®</span></span><br><span class="line"><span class="comment">// æ³¨æ„ï¼Œæ¯ä¸ªæŒ‰é’®ä¼š â€œè®°ä½â€ è‡ªå·±çš„ countï¼Œè€Œä¸å½±å“å…¶ä»–æŒ‰é’®</span></span><br><span class="line"><span class="keyword">import</span> &#123; useState &#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">MyApp</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Counters that update separately<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MyButton</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MyButton</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      Clicked &#123;count&#125; times</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="ç»„ä»¶çš„æ ·å¼å¤„ç†"><a href="#ç»„ä»¶çš„æ ·å¼å¤„ç†" class="headerlink" title="ç»„ä»¶çš„æ ·å¼å¤„ç†"></a>ç»„ä»¶çš„æ ·å¼å¤„ç†</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¡Œå†…  &lt;div style=&#123; color=&quot;red&quot; &#125;&gt;    ä¸æ¨è</span></span><br><span class="line"><span class="comment">// åœ¨ React ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ `className` æ¥æŒ‡å®šä¸€ä¸ª CSS çš„ classã€‚å®ƒä¸ HTML çš„ class å±æ€§çš„å·¥ä½œæ–¹å¼ç›¸åŒï¼š</span></span><br><span class="line"><span class="comment">/* åœ¨å¼•å…¥çš„ CSSæ–‡ä»¶ä¸­ */</span>  å‰ææ˜¯ä½ å¼•å…¥äº†cssæ–‡ä»¶ <span class="keyword">import</span> â€™./cssâ€˜</span><br><span class="line">.<span class="property">avatar</span> &#123;</span><br><span class="line">  border-<span class="attr">radius</span>: <span class="number">50</span>%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">classNamesç®€å•çš„jsåº“ï¼Œé€šè¿‡ æ¡ä»¶ åŠ¨æ€çš„æ§åˆ¶<span class="keyword">class</span>ç±»çš„æ˜¾ç¤º</span><br><span class="line">ä¾‹å¦‚ï¼šclassName=&#123;<span class="title function_">classNames</span>(<span class="string">&#x27;é™æ€çš„ç±»å&#x27;</span>)ï¼Œ&#123; <span class="attr">active</span>: æ¡ä»¶è¡¨è¾¾å¼ &#125;  &#125;</span><br><span class="line">ä¸‹è½½ npm install classNames</span><br><span class="line">å¯¼å…¥</span><br></pre></td></tr></table></figure><h3 id="è¡¨å•ç»‘å®š"><a href="#è¡¨å•ç»‘å®š" class="headerlink" title="è¡¨å•ç»‘å®š"></a>è¡¨å•ç»‘å®š</h3><p>  å°±æ˜¯stateçŠ¶æ€ æ§åˆ¶  è¡¨å•çŠ¶æ€å±æ€§valueå€¼    ä»–ä¿©åšä¸€ä¸ªç»‘å®š</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// stateçŠ¶æ€å€¼</span></span><br><span class="line"><span class="keyword">const</span> [value, setValue] = <span class="title function_">useState</span>(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"><span class="comment">// input çš„valueç»‘å®š stateçš„value</span></span><br><span class="line">&lt;input value=&#123;value&#125; onChange=&#123; <span class="function">(<span class="params">e</span>) =&gt;</span> <span class="title function_">setValue</span>(e.<span class="property">target</span>.<span class="property">value</span>)&#125;</span><br></pre></td></tr></table></figure><p>reactè·å–domæ“ä½œdom</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span><span class="comment">// useRef é’©å­å‡½æ•°   åˆ›å»ºrefå¯¹è±¡</span></span><br><span class="line"> <span class="keyword">const</span> inputRef = <span class="title function_">useRef</span>(<span class="literal">null</span>)</span><br><span class="line"> <span class="comment">// ä¸jsxç»‘å®š</span></span><br><span class="line"> &lt;input type=â€™textâ€˜  ref=&#123;inputRef&#125; /&gt;</span><br><span class="line"><span class="number">2</span><span class="comment">// domå¯ç”¨æ—¶  inputRef.current è·å–å³å¯</span></span><br><span class="line">  ç”¨refå¯¹è±¡èº«ä¸Šçš„å±æ€§</span><br></pre></td></tr></table></figure><h3 id="ç»„ä»¶é—´å…±äº«æ•°æ®ï¼ˆé€šä¿¡ï¼‰"><a href="#ç»„ä»¶é—´å…±äº«æ•°æ®ï¼ˆé€šä¿¡ï¼‰" class="headerlink" title="ç»„ä»¶é—´å…±äº«æ•°æ®ï¼ˆé€šä¿¡ï¼‰"></a>ç»„ä»¶é—´å…±äº«æ•°æ®ï¼ˆé€šä¿¡ï¼‰</h3><h4 id="çˆ¶å­ä¹‹é—´ï¼š"><a href="#çˆ¶å­ä¹‹é—´ï¼š" class="headerlink" title="çˆ¶å­ä¹‹é—´ï¼š"></a>çˆ¶å­ä¹‹é—´ï¼š</h4><img src="D:\webstorm\typora\images\image-20231123151535264.png" alt="image-20231123151535264" style="zoom: 67%;" /><ol><li>â€‹    çˆ¶ç»„ä»¶ä¼ ï¼Œå­ç»„ä»¶ç»‘å®šå±æ€§ï¼Œå­ç»„ä»¶æ¥æ”¶propsï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°±å¯ä»¥ä½¿ç”¨</li><li>â€‹propså¯ä»¥ä¼ ä»»æ„æ•°æ®ï¼ˆæ•°ç»„ï¼Œå¯¹è±¡ï¼Œæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œå‡½æ•°ï¼Œå¸ƒå°”ï¼Œjsxï¼Œï¼‰ï¼Œå­ç»„ä»¶ä¸èƒ½ä¿®æ”¹propsï¼Œåªèƒ½çˆ¶ä¿®æ”¹</li><li>â€‹    children ç‰¹æ®Šçš„propsï¼Œçš„ä¸€ä¸ªå±æ€§ï¼Œè¯†åˆ«    å†…å®¹åµŒå¥—åœ¨å­ç»„ä»¶å†…æ—¶</li><li>â€‹    å­ä¼ çˆ¶ï¼šå­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶ä¸­çš„æ–¹æ³•ï¼Œå…ˆè¦çˆ¶ç»„ä»¶ä¼ å¤„ç†å‡½æ•°è¿‡å»ï¼Œå­ç»„ä»¶è°ƒç”¨ç„¶åå¯ä»¥ä¼ å‚æ•°</li></ol><h4 id="å…„å¼Ÿä¹‹é—´ï¼š"><a href="#å…„å¼Ÿä¹‹é—´ï¼š" class="headerlink" title="å…„å¼Ÿä¹‹é—´ï¼š"></a>å…„å¼Ÿä¹‹é—´ï¼š</h4><img src="D:\webstorm\typora\images\image-20231123155833303.png" alt="image-20231123155833303" style="zoom:67%;" /><p>çŠ¶æ€æå‡ï¼šé€šè¿‡å…±åŒçš„çˆ¶ç»„ä»¶ï¼Œaç»„ä»¶  &#x3D;&gt;  çˆ¶ç»„ä»¶ &#x3D;&gt; bç»„ä»¶</p><p>åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œæ¯ä¸ªæŒ‰é’®éƒ½æœ‰è‡ªå·±çš„stateï¼Œä½†æ˜¯å¸¸å¸¸éœ€è¦ç»„ä»¶å…±äº«æ•°æ®ä¸€èµ·æ›´æ–°ï¼Œæ‰€ä»¥éœ€è¦ å„ä¸ªstate â€™å‘ä¸Šâ€˜ç§»åŠ¨åˆ°æœ€æ¥è¿‘æ‰€æœ‰æŒ‰é’®çš„ç»„ä»¶</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  state ä¸Šç§»åˆ° MyApp ä¸­</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">function</span> <span class="title function_">MyApp</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = <span class="title function_">useState</span>(<span class="number">0</span>);</span><br><span class="line">   <span class="comment">//</span></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">handleClick</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">setCount</span>(count + <span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line"><span class="comment">// æ¥ç€ï¼Œå°† MyApp ä¸­çš„ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°ä»¥åŠ state ä¸€åŒå‘ä¸‹ä¼ é€’åˆ° æ¯ä¸ª MyButton ä¸­ã€‚ä½ å¯ä»¥ä½¿ç”¨ JSX çš„å¤§æ‹¬å·å‘ MyButton ä¼ é€’ä¿¡æ¯</span></span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Counters that update separately<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MyButton</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">      <span class="tag">&lt;<span class="name">MyButton</span> <span class="attr">count</span>=<span class="string">&#123;count&#125;</span> <span class="attr">onClick</span>=<span class="string">&#123;handleClick&#125;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyButton</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// ... moving code from here ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æœ€åï¼Œæ”¹å˜ MyButton ä»¥ è¯»å– ä»çˆ¶ç»„ä»¶ä¼ é€’æ¥çš„ propï¼š</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">MyButton</span>(<span class="params">&#123; count, onClick &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;onClick&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">      Clicked &#123;count&#125; times</span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å…ˆæ˜¯stateä¸Šç§»åˆ°äº†åŒ…è£¹æ‰€æœ‰æŒ‰é’®çš„ç»„ä»¶ï¼Œå†é€šè¿‡ç‚¹å‡»äº‹ä»¶å¤„ç†å‡½æ•°å’Œstateä¸€åŒå‘ä¸‹ä¼ é€’åˆ°æ¯ä¸ªbuttonä¸­</p><p>è¿™ç§ä¼ é€’æ–¹å¼å«propï¼Œè¦åœ¨å­ç»„ä»¶ä¸­æ¥æ”¶</p><p>æ–°çš„ <code>count</code> å€¼ä¼šè¢«ä½œä¸º prop ä¼ é€’ç»™æ¯ä¸ªæŒ‰é’®ï¼Œå› æ­¤å®ƒä»¬æ¯æ¬¡å±•ç¤ºçš„éƒ½æ˜¯æœ€æ–°çš„å€¼ã€‚è¿™è¢«ç§°ä¸ºâ€œçŠ¶æ€æå‡â€ã€‚</p><h4 id="è·¨å±‚çº§ç»„ä»¶ï¼š"><a href="#è·¨å±‚çº§ç»„ä»¶ï¼š" class="headerlink" title="è·¨å±‚çº§ç»„ä»¶ï¼š"></a>è·¨å±‚çº§ç»„ä»¶ï¼š</h4><p>context</p><img src="D:\webstorm\typora\images\image-20231123161804835.png" alt="image-20231123161804835" style="zoom:67%;" /><p>ç”¨createContextæ–¹æ³•åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼ˆæœ€å¤–å±‚ï¼‰ï¼Œåœ¨é¡¶å±‚ç»„ä»¶ä¸­ï¼Œç”¨å¯¹è±¡.Provider ç»„ä»¶ï¼ˆé«˜é˜¶ç»„ä»¶ï¼‰æä¾›æ•°æ®ï¼Œåœ¨åº•å±‚ç»„ä»¶ä¸­ç”¨useContexté’©å­å‡½æ•°è·å–</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é¡¶å±‚ç»„ä»¶</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">App</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">    <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">   <span class="tag">&lt;<span class="name">å¯¹è±¡.Provider</span> <span class="attr">value</span>=<span class="string">&#123;</span> <span class="attr">æ•°æ®</span> &#125;&gt;</span> å†…å®¹ <span class="tag">&lt;/<span class="name">å¯¹è±¡.Provider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// åº•å±‚ç»„ä»¶</span></span><br><span class="line"><span class="keyword">return</span> (</span><br><span class="line"><span class="keyword">const</span> msg = <span class="title function_">useContext</span>(æ•°æ®)   <span class="comment">//æ¥æ”¶</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="useEffect"><a href="#useEffect" class="headerlink" title="useEffect"></a>useEffect</h3><p>ç»„ä»¶æ²¡æœ‰å‘ç”Ÿä»»ä½•ç”¨æˆ·äº‹ä»¶, ç»„ä»¶æ¸²æŸ“å®Œæ¯•å°±è¦å’ŒæœåŠ¡ç«¯è¯·æ±‚æ•°æ®,      è¿™ä¸ªè¿‡ç¨‹å«åªç”±æ¸²æŸ“å¼•èµ·çš„æ“ä½œ</p><p>æ¯”å¦‚:  å‘é€è¯·æ±‚,  æ›´æ”¹dom</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯­æ³•   ä¸¤ä¸ªå‚æ•°</span></span><br><span class="line"><span class="comment">// ç¬¬ä¸€ä¸ª  æ˜¯ä¸€ä¸ªå‡½æ•°,ä¹Ÿå«å‰¯ä½œç”¨å‡½æ•°,æ˜¯æˆ‘ä»¬è¦æ‰§è¡Œå¯¹çš„æ“ä½œ</span></span><br><span class="line"><span class="title function_">useEffect</span>( <span class="function">() =&gt;</span> &#123;   å¯æ‰§è¡Œæ“ä½œ   &#125;, [] )</span><br><span class="line"><span class="comment">// ç¬¬äºŒä¸ª  ä¾èµ–é¡¹æ•°ç»„,ä¾èµ–é¡¹ä¸åŒä¼šå†³å®šå‰é¢å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œæ—¶æœº..</span></span><br><span class="line"></span><br><span class="line">   <span class="number">1</span>,ç©ºæ•°ç»„ä¾èµ–æ—¶å€™, ç»„ä»¶åªåœ¨åˆå§‹æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡</span><br><span class="line">   <span class="number">2</span>,å½“æ²¡æœ‰ä¾èµ–é¡¹æ—¶, ç»„ä»¶åˆå§‹æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡ + ç»„ä»¶æ›´æ–°æ¸²æŸ“æ—¶æ‰§è¡Œ</span><br><span class="line">   <span class="number">3</span>,æœ‰ç‰¹å®šä¾èµ–é¡¹æ—¶, ç»„ä»¶åˆå§‹æ¸²æŸ“æ—¶æ‰§è¡Œä¸€æ¬¡ + ç‰¹å®šä¾èµ–é¡¹å˜åŒ–æ‰§è¡Œ  ä¾‹:[state]</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”±æ¸²æŸ“æœ¬èº«å¼•èµ·çš„ï¼Œ</span></span><br><span class="line"><span class="comment">// æ¸…é™¤å‰¯ä½œç”¨: æ¯”å¦‚åœ¨useEffectçš„å‰¯ä½œç”¨å‡½æ•°ä¸­åšäº†ä¸€äº›æ“ä½œ,æœ‰æ—¶éœ€è¦åŠæ—¶æ¸…é™¤æ‰,æ¯”å¦‚å¼€å¯äº†å®šæ—¶å™¨</span></span><br><span class="line"><span class="comment">// æ¸…é™¤æœ€å¥½çš„æ—¶æœºï¼šç»„ä»¶è¢«å¸è½½çš„æ—¶å€™</span></span><br><span class="line">...è¯­æ³•:</span><br><span class="line">    <span class="title function_">useEffect</span>( <span class="function">()=&gt;</span> &#123;</span><br><span class="line">        <span class="comment">// åœ¨å‰¯ä½œç”¨å‡½æ•°ä¸­return</span></span><br><span class="line">        <span class="keyword">return</span> <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// æ¸…é™¤å‰¯ä½œç”¨çš„é€»è¾‘</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; ,[])</span><br></pre></td></tr></table></figure><h3 id="Hookå‡½æ•°"><a href="#Hookå‡½æ•°" class="headerlink" title="Hookå‡½æ•°"></a>Hookå‡½æ•°</h3><p>ä»¥ <code>use</code> å¼€å¤´çš„å‡½æ•°è¢«ç§°ä¸º <strong>Hook</strong>ã€‚æ¯”å¦‚ï¼šuseStateã€useEffect    æ˜¯ React æä¾›çš„å†…ç½® Hookï¼Œå®ç°é€»è¾‘å°è£…å’Œå¤ç”¨ã€‚ä½ å¯ä»¥åœ¨ <a href="https://react.docschina.org/reference/react">React API å‚è€ƒ</a> ä¸­æ‰¾åˆ°å…¶ä»–å†…ç½®çš„ Hookã€‚ä¹Ÿå¯ä»¥æ ¹æ®ç°æœ‰çš„Hookç¼–å†™è‡ªå·±çš„Hookã€‚Hook æ¯”æ™®é€šå‡½æ•°æ›´ä¸ºä¸¥æ ¼</p><p>ä½ åªèƒ½åœ¨ä½ çš„ç»„ä»¶ï¼ˆæˆ–å…¶ä»– Hookï¼‰çš„ <strong>é¡¶å±‚</strong> è°ƒç”¨ Hookã€‚å¦‚æœä½ æƒ³åœ¨ä¸€ä¸ªæ¡ä»¶æˆ–å¾ªç¯ä¸­ä½¿ç”¨ <code>useState</code>ï¼Œè¯·æå–ä¸€ä¸ªæ–°çš„ç»„ä»¶å¹¶åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨å®ƒã€‚</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è‡ªå®šä¹‰hook(é€»è¾‘å¤ç”¨)    1.å£°æ˜useå¼€å¤´çš„å‡½æ•°</span></span><br><span class="line"><span class="comment">// æ¯”å¦‚å¸ƒå°”å€¼é¢‘ç¹åˆ‡æ¢çš„åœºæ™¯</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">useToggle</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="comment">// 2.å†™å¤ç”¨çš„ä»£ç é€»è¾‘</span></span><br><span class="line">    <span class="keyword">const</span> [ value, setValue] = <span class="title function_">useState</span>(<span class="literal">true</span>)</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">toggle</span> = (<span class="params"></span>) =&gt; &#123; <span class="title function_">setValue</span>(!value )&#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="comment">// 3.é‚£äº›çŠ¶æ€ï¼ˆæ•°æ®ï¼‰æˆ–è€… å›è°ƒå‡½æ•° éœ€è¦åœ¨å…¶ä»–åœ°æ–¹ä½¿ç”¨å°±returnå‡ºå»</span></span><br><span class="line">        value,</span><br><span class="line">        toggle</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 4.ä½¿ç”¨çš„æ—¶å€™ç›´æ¥è§£æ„å‡ºæ¥ const &#123; value, toggle &#125; = useToggle()</span></span><br></pre></td></tr></table></figure><h4 id="ReactHooksä½¿ç”¨è§„åˆ™"><a href="#ReactHooksä½¿ç”¨è§„åˆ™" class="headerlink" title="ReactHooksä½¿ç”¨è§„åˆ™"></a>ReactHooksä½¿ç”¨è§„åˆ™</h4><ol><li>åªèƒ½åœ¨ç»„ä»¶ä¸­  æˆ–è€…  å…¶ä»–è‡ªå®šä¹‰hookä¸­ è°ƒç”¨ ï¼ˆ ç»„ä»¶å¤–ä¸å¯ä»¥ç”¨ ï¼‰</li><li>åªèƒ½åœ¨ç»„ä»¶çš„é¡¶å±‚è°ƒç”¨ï¼Œä¸èƒ½åµŒå¥—åœ¨if ï¼Œforï¼Œ æˆ–è€…å…¶ä»–çš„å‡½æ•°ä¸­</li></ol><h1 id="æ¡ˆä¾‹"><a href="#æ¡ˆä¾‹" class="headerlink" title="æ¡ˆä¾‹"></a>æ¡ˆä¾‹</h1><p>ä¸ºäº†â€œè®°ä½â€ä¸€äº›ä¸œè¥¿ï¼Œç»„ä»¶ä½¿ç”¨ <em>state</em></p><p>è¦ä»å¤šä¸ªå­ç»„ä»¶ä¸­æ”¶é›†æ•°æ®ï¼Œæˆ–è®©ä¸¤ä¸ªå­ç»„ä»¶ç›¸äº’é€šä¿¡ï¼Œè¯·åœ¨å…¶çˆ¶ç»„ä»¶ä¸­å£°æ˜å…±äº«stateï¼Œçˆ¶ç»„ä»¶å¯ä»¥é€šè¿‡propså°†è¯¥stateä¼ å›ç»™å­ç»„ä»¶ã€‚è¿™æ ·å­ç»„ä»¶å½¼æ­¤åŒæ­¥å¹¶ä¸å…¶çˆ¶ç»„ä»¶ä¿æŒåŒæ­¥ã€‚</p><p>propä¸­å­æ— æ³•ä¿®æ”¹çˆ¶</p><p>åœ¨ React ä¸­ï¼Œé€šå¸¸ä½¿ç”¨ <code>onSomething</code> å‘½åä»£è¡¨äº‹ä»¶çš„ propsï¼Œä½¿ç”¨ <code>handleSomething</code> å‘½åå¤„ç†è¿™äº›äº‹ä»¶çš„å‡½æ•°ã€‚</p><h3 id="ä¸å˜æ€§"><a href="#ä¸å˜æ€§" class="headerlink" title="ä¸å˜æ€§"></a>ä¸å˜æ€§</h3><p>åœ¨æ¡ˆä¾‹ä¸­ï¼Œæ²¡æœ‰ç›´æ¥ä¿®æ”¹æ•°ç»„çš„åŸæ•°æ®ï¼Œè€Œæ˜¯.slice() å‡ºä¸€ä¸ªæ–°å‰¯æœ¬ï¼Œä¿®æ”¹è¿™ä¸ªå‰¯æœ¬ã€‚åœ¨ä¸€èˆ¬æƒ…å†µä¸­ï¼Œè¦ä¹ˆä¿®æ”¹åŸæ•°æ®ï¼Œè¦ä¹ˆä¿®æ”¹å‰¯æœ¬ï¼Œéƒ½å¯ä»¥æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ï¼Œä½†æ˜¯ç”¨å‰¯æœ¬æ¥è¯´ï¼Œæœ‰å‡ ä¸ªå¥½å¤„ï¼šå¯ä»¥å®ç°å¤æ‚çš„åŠŸèƒ½ï¼Œåœ¨æ¡ˆä¾‹ä¸­å¯ä»¥å®ç°ä¸€ä¸ªå›æº¯çš„åŠŸèƒ½ï¼Œæ­¤åŠŸèƒ½æœ‰å¹¿æ³›çš„åº”ç”¨ï¼Œæ’¤é”€å’Œé‡åšæŸäº›æ“ä½œæ˜¯åº”ç”¨çš„å¸¸è§åŠŸèƒ½</p><h3 id="æ—¶å…‰å›æº¯"><a href="#æ—¶å…‰å›æº¯" class="headerlink" title="æ—¶å…‰å›æº¯"></a>æ—¶å…‰å›æº¯</h3><p>æ¯æ¬¡è½å­éƒ½ç”¨sliceåˆ›å»ºäº†æ–°çš„å‰¯æœ¬ï¼Œè¿™å¯ä»¥è§†ä¸ºåŸæ•°ç»„squaresä¸å˜ï¼Œ æŠŠè¿‡å»çš„squareså­˜åœ¨ä¸€ä¸ªæ–°çš„æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ•°ç»„è§†ä¸ºä¸€ä¸ªæ–°çš„stateå˜é‡</p><h3 id="key"><a href="#key" class="headerlink" title="key"></a>key</h3><p>æ¸²æŸ“åˆ—è¡¨æ—¶ï¼šè¦æœ‰keyå±æ€§ä½œä¸ºåŒºåˆ†</p><h1 id="props-å’Œ-state"><a href="#props-å’Œ-state" class="headerlink" title="props   å’Œ   state"></a>props   å’Œ   state</h1><p>props å°±åƒæ˜¯ä½ ä¼ é€’çš„å‚æ•°è‡³å‡½æ•°ï¼Œå®ƒä½¿çˆ¶ç»„ä»¶ä¼ é€’æ•°æ®ç»™å­ç»„ä»¶ï¼Œ</p><p>state  å°±åƒæ˜¯ç»„ä»¶çš„å†…å­˜ï¼Œå¯¹ä¸€äº›æ•°æ®è¿›è¡Œè¿½è¸ªï¼Œå¹¶æ ¹æ®äº¤äº’æ¥æ”¹å˜å€¼ï¼Œ</p><h1 id="reactå¯¹å¯è§è®¾è®¡å’Œåº”ç”¨æ„å»ºçš„æ€è€ƒ"><a href="#reactå¯¹å¯è§è®¾è®¡å’Œåº”ç”¨æ„å»ºçš„æ€è€ƒ" class="headerlink" title="reactå¯¹å¯è§è®¾è®¡å’Œåº”ç”¨æ„å»ºçš„æ€è€ƒ"></a>reactå¯¹å¯è§è®¾è®¡å’Œåº”ç”¨æ„å»ºçš„æ€è€ƒ</h1><p>æ„å»ºç”¨æˆ·ç•Œé¢ï¼Œåˆ†è§£æˆç»„ä»¶ï¼ŒæŠŠç»„ä»¶é“¾æ¥åœ¨ä¸€èµ·ï¼Œä½¿æ•°æ®æµç»å®ƒä»¬</p><h4 id="æ­¥éª¤ä¸€ï¼šå°†UIæ‹†è§£ä¸ºç»„ä»¶å±‚çº§ç»“æ„"><a href="#æ­¥éª¤ä¸€ï¼šå°†UIæ‹†è§£ä¸ºç»„ä»¶å±‚çº§ç»“æ„" class="headerlink" title="æ­¥éª¤ä¸€ï¼šå°†UIæ‹†è§£ä¸ºç»„ä»¶å±‚çº§ç»“æ„"></a>æ­¥éª¤ä¸€ï¼šå°†UIæ‹†è§£ä¸ºç»„ä»¶å±‚çº§ç»“æ„</h4><img src="D:\webstorm\typora\images\image-20231122151840463.png" alt="image-20231122151840463" style="zoom:50%;" /><p>ç°åœ¨ä½ å·²ç»åœ¨åŸå‹ä¸­è¾¨åˆ«äº†ç»„ä»¶ï¼Œå¹¶å°†å®ƒä»¬è½¬åŒ–ä¸ºäº†å±‚çº§ç»“æ„ã€‚</p><p>åœ¨åŸå‹ä¸­ï¼Œç»„ä»¶å¯ä»¥å±•ç¤ºåœ¨å…¶å®ƒç»„ä»¶ä¹‹ä¸­ï¼Œåœ¨å±‚çº§ç»“æ„ä¸­å¦‚åŒå…¶å­©å­ä¸€èˆ¬:</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">|---<span class="title class_">FilterableProductTable</span></span><br><span class="line">    |--<span class="title class_">SearchBar</span></span><br><span class="line">    |--<span class="title class_">ProductTable</span></span><br><span class="line">     |--<span class="title class_">ProductCategoryRow</span></span><br><span class="line">    |--<span class="title class_">ProductRow</span></span><br></pre></td></tr></table></figure><h4 id="æ­¥éª¤äºŒï¼šä½¿ç”¨-React-æ„å»ºä¸€ä¸ªé™æ€ç‰ˆæœ¬"><a href="#æ­¥éª¤äºŒï¼šä½¿ç”¨-React-æ„å»ºä¸€ä¸ªé™æ€ç‰ˆæœ¬" class="headerlink" title="æ­¥éª¤äºŒï¼šä½¿ç”¨ React æ„å»ºä¸€ä¸ªé™æ€ç‰ˆæœ¬"></a>æ­¥éª¤äºŒï¼šä½¿ç”¨ React æ„å»ºä¸€ä¸ªé™æ€ç‰ˆæœ¬</h4><p>æœ‰äº†ç»„ä»¶çš„å±‚çº§ç»“æ„åï¼Œæœ€ç›´æ¥çš„åŠæ³•å°±æ˜¯æ„å»ºä¸€ä¸ªä¸å¸¦äº¤äº’çš„é™æ€ç‰ˆæœ¬ï¼Œå†ä¸€ä¸€æ·»åŠ äº¤äº’ï¼Œ</p><p>æ—¢å¯ä»¥ä»å±‚çº§é«˜çš„ç»„ä»¶è‡ªä¸Šè€Œä¸‹æ„å»ºï¼ˆå°æ¡ˆä¾‹ï¼‰ï¼Œä¹Ÿå¯ä»¥ä»åº•å±‚çº§ç»„ä»¶æ„å»ºï¼ˆå¤§é¡¹ç›®ï¼‰</p><p>åœ¨æˆ‘ä»¬æ„å»ºå¥½äº†ç»„ä»¶ä¹‹åï¼Œæˆ‘ä»¬å°±æœ‰äº†å¾…æ¸²æŸ“çš„å¯å¤ç”¨ç»„ä»¶åº“ï¼Œè¿™æ˜¯é™æ€çš„ï¼Œæœ€é¡¶å±‚çš„ç»„ä»¶å°†æ¥æ”¶æ•°æ®ä½œä¸ºå…¶propä¼ é€’ç»™å­ç»„ä»¶ï¼Œç§°ä¸ºå•å‘æ•°æ®æµ</p><h4 id="æ­¥éª¤ä¸‰ï¼šæ‰¾å‡º-UI-ç²¾ç®€ä¸”å®Œæ•´çš„-state-è¡¨ç¤ºï¼ˆæ‰¾å‡ºstateï¼‰"><a href="#æ­¥éª¤ä¸‰ï¼šæ‰¾å‡º-UI-ç²¾ç®€ä¸”å®Œæ•´çš„-state-è¡¨ç¤ºï¼ˆæ‰¾å‡ºstateï¼‰" class="headerlink" title="æ­¥éª¤ä¸‰ï¼šæ‰¾å‡º UI ç²¾ç®€ä¸”å®Œæ•´çš„ state è¡¨ç¤ºï¼ˆæ‰¾å‡ºstateï¼‰"></a>æ­¥éª¤ä¸‰ï¼šæ‰¾å‡º UI ç²¾ç®€ä¸”å®Œæ•´çš„ state è¡¨ç¤ºï¼ˆæ‰¾å‡ºstateï¼‰</h4><p>ä¸æ˜¯stateçš„æƒ…å†µï¼š</p><p>â€‹éœ€è¦ä¿®æ”¹çš„æ•°æ®</p><p>â€‹é€šè¿‡propsä»çˆ¶ç»„ä»¶ä¼ é€’</p><p>â€‹æ— æ³•åŸºäºå·²å­˜åœ¨äºç»„ä»¶ä¸­çš„stateå’Œpropsè®¡ç®—å‡ºæ–°çš„ä¸œè¥¿</p><h4 id="æ­¥éª¤å››ï¼šéªŒè¯stateåº”è¯¥æ”¾åœ¨å“ªé‡Œ"><a href="#æ­¥éª¤å››ï¼šéªŒè¯stateåº”è¯¥æ”¾åœ¨å“ªé‡Œ" class="headerlink" title="æ­¥éª¤å››ï¼šéªŒè¯stateåº”è¯¥æ”¾åœ¨å“ªé‡Œ"></a>æ­¥éª¤å››ï¼šéªŒè¯stateåº”è¯¥æ”¾åœ¨å“ªé‡Œ</h4><p>ç›®çš„ï¼šææ¸…æ¥šå“ªä¸ªç»„ä»¶åº”è¯¥æ‹¥æœ‰å“ªä¸ªstate</p><p>å¯¹æ¯ä¸€ä¸ªstateè¿›è¡Œä»¥ä¸‹åˆ†æï¼š</p><p>â€‹1ï¼Œçœ‹çœ‹æ¯ä¸€ä¸ªåŸºäºç‰¹å®šstateæ¸²æŸ“çš„ç»„ä»¶</p><p>â€‹2ï¼Œå¯»æ‰¾ä»–ä»¬æœ€è¿‘å¹¶ä¸”å…±åŒçš„çˆ¶ç»„ä»¶</p><p>â€‹3ï¼Œæœ€åï¼Œå†³å®šè¿™ä¸ªstateæ”¾åœ¨å“ªé‡Œ</p><pre><code>              1ã€‚ä¸€èˆ¬æƒ…å†µç›´æ¥æ”¾åœ¨çˆ¶ç»„ä»¶ä¸Šå°±å¯ä»¥</code></pre><p>â€‹  2ã€‚æˆ–è€…æ”¾åœ¨çˆ¶ç»„ä»¶çš„çˆ¶ç»„ä»¶</p><p>â€‹  3ã€‚å¦‚æœæ‰¾ä¸åˆ°ï¼Œå¯ä»¥åˆ›å»ºå•ç‹¬çš„ç»„ä»¶æ¥å­˜æ”¾stateï¼Œå¹¶å°†å®ƒæ·»åŠ åˆ°ä»–ä»¬çˆ¶ç»„ä»¶ä¸Šå±‚çš„æŸä¸ªåœ°æ–¹ã€‚</p><h4 id="æ­¥éª¤äº”ï¼šæ·»åŠ åå‘æ•°æ®æµ"><a href="#æ­¥éª¤äº”ï¼šæ·»åŠ åå‘æ•°æ®æµ" class="headerlink" title="æ­¥éª¤äº”ï¼šæ·»åŠ åå‘æ•°æ®æµ"></a>æ­¥éª¤äº”ï¼šæ·»åŠ åå‘æ•°æ®æµ</h4><h1 id="Redux"><a href="#Redux" class="headerlink" title="Redux"></a>Redux</h1><p>reactå¸¸ç”¨çš„çŠ¶æ€ç®¡ç†å·¥å…·ï¼ˆç±»ä¼¼Piniaï¼ŒVuexï¼‰ï¼Œå¯ä»¥ç‹¬ç«‹è¿è¡Œï¼Œä¸ç»‘å®šreact</p><img src="D:\webstorm\typora\images\image-20231126082400166.png" alt="image-20231126082400166" style="zoom:50%;" /><img src="D:\webstorm\typora\images\image-20231213171828374.png" alt="image-20231213171828374" style="zoom: 50%;" /><p>stateï¼šå¯¹è±¡ï¼Œå­˜æ”¾æˆ‘ä»¬ç®¡ç†çš„çŠ¶æ€æ•°æ®</p><p>actionï¼šå¯¹è±¡ï¼Œæè¿°æ€ä¹ˆä¿®æ”¹state</p><p>reducerï¼šå‡½æ•°ï¼Œæ ¹æ®action ç”Ÿæˆæ–°çš„ state</p><h2 id="å•ç‹¬ä½¿ç”¨"><a href="#å•ç‹¬ä½¿ç”¨" class="headerlink" title="å•ç‹¬ä½¿ç”¨"></a>å•ç‹¬ä½¿ç”¨</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1ï¼Œå®šä¹‰reducerå‡½æ•°ï¼ˆä¸¤ä¸ªå‚æ•°ï¼‰</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">reducer</span>(<span class="params"> state, action </span>) &#123;</span><br><span class="line">    <span class="comment">// state å¯¹è±¡ ï¼Œåˆå§‹çš„æ•°æ®çŠ¶æ€ï¼Œ</span></span><br><span class="line">    <span class="comment">// actionå¯¹è±¡ ä¸Šçš„å±æ€§typeï¼Œæ ‡è®°å½“å‰æƒ³è¦åšä»€ä¹ˆæ ·çš„ä¿®æ”¹  action.type</span></span><br><span class="line">    <span class="comment">// reducerä½œç”¨ï¼Œæ ¹æ®ä¸åŒçš„actionï¼Œè¿”å›æ–°çš„state</span></span><br><span class="line">    <span class="keyword">return</span> state</span><br><span class="line">        <span class="comment">// æ•°æ®ä¸å¯å˜ï¼ŒåŸºäºåˆå§‹stateï¼Œè¿”å›ç”Ÿæˆæ–°çš„ state</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2ï¼Œç”¨reducerå‡½æ•°ç”Ÿæˆstoreå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title class_">Redux</span>.<span class="title function_">createStore</span>(reducer)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3,ç”¨storeå®ä¾‹ä¸­çš„subscribeæ–¹æ³• ç›‘æµ‹ï¼ˆè®¢é˜…ï¼‰æ•°æ®çš„å˜åŒ–</span></span><br><span class="line">store.<span class="title function_">subscribe</span>( <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å›è°ƒå‡½æ•° åœ¨æ•°æ®ä¸€å‘ç”Ÿå˜åŒ–å°±æ‰§è¡Œ</span></span><br><span class="line">    <span class="title function_">log</span>(<span class="string">&#x27;state å˜åŒ–äº†&#x27;</span>)</span><br><span class="line">&#125; )</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4ï¼Œç”¨storeå®ä¾‹ä¸­çš„dispatchæ–¹æ³•ï¼Œæäº¤ä¸€ä¸ªactionå¯¹è±¡æ›´æ–°çŠ¶æ€</span></span><br><span class="line"><span class="comment">//    Reduxä¸­ä¿®æ”¹æ•°æ®çš„å”¯ä¸€æ–¹å¼å°±æ˜¯dispatch</span></span><br><span class="line">store.<span class="title function_">dispatch</span>(&#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;&#x27;</span> <span class="comment">// å’Œreducerå‡½æ•°ä¸­typeæ ‡è®°çš„æ˜¯ä¸€æ ·çš„</span></span><br><span class="line">&#125;).</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5ï¼Œç”¨storeä¸­çš„getStateæ–¹æ³•è·å–æœ€æ–°çŠ¶æ€ æ›´æ–°æ¸²æŸ“ åˆ°è§†å›¾ä¸­</span></span><br><span class="line">store.<span class="title function_">getState</span>()  <span class="comment">// å¯ä»¥åœ¨ç¬¬ä¸‰æ­¥ä¸­è¿›è¡Œè·å–å¹¶æ›´æ–°</span></span><br></pre></td></tr></table></figure><h2 id="ç¯å¢ƒï¼Œå·¥å…·"><a href="#ç¯å¢ƒï¼Œå·¥å…·" class="headerlink" title="ç¯å¢ƒï¼Œå·¥å…·"></a>ç¯å¢ƒï¼Œå·¥å…·</h2><p>ä¸¤ä¸ªæ’ä»¶â€”Redux Toolkit   å’Œ react-redux</p><p>1ï¼ŒRedux Toolkitï¼ˆRTKï¼‰  å·¥å…·é›†ï¼Œç®€åŒ–ä¹¦å†™æ–¹å¼ï¼Œä¾‹å¦‚ï¼šç®€åŒ–storeçš„é…ç½®ï¼Œå†…ç½®immerå¯å˜å¼çŠ¶æ€ä¿®æ”¹ï¼Œå†…ç½®thunkæ›´å¥½çš„å¼‚æ­¥åˆ›å»º</p><p>2ï¼Œé“¾æ¥react  å’Œ  redux  çš„ä¸­é—´ä»¶</p><img src="D:\webstorm\typora\images\image-20231126085231056.png" alt="image-20231126085231056" style="zoom: 33%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¦æœ‰reacté¡¹ç›®ï¼Œæ²¡æœ‰å°±åˆ›å»ºï¼ˆnpx create-react-app react-reduxï¼‰</span></span><br><span class="line"><span class="comment">// å®‰è£…</span></span><br><span class="line">npm install @reduxjs/toolkit react-redux</span><br><span class="line"><span class="comment">// å¯åŠ¨é¡¹ç›®å³å¯</span></span><br></pre></td></tr></table></figure><h2 id="é…åˆreactä½¿ç”¨"><a href="#é…åˆreactä½¿ç”¨" class="headerlink" title="é…åˆreactä½¿ç”¨"></a>é…åˆreactä½¿ç”¨</h2><h3 id="å…ˆåˆ›å»ºstoreç›®å½•-reduxjs-toolkit"><a href="#å…ˆåˆ›å»ºstoreç›®å½•-reduxjs-toolkit" class="headerlink" title="å…ˆåˆ›å»ºstoreç›®å½• (@reduxjs&#x2F;toolkit)"></a>å…ˆåˆ›å»ºstoreç›®å½• (@reduxjs&#x2F;toolkit)</h3><img src="D:\webstorm\typora\images\image-20231126085756567.png" alt="image-20231126085756567" style="zoom:33%;" /><p>modulesï¼šå­æ¨¡å—</p><p>index.jsï¼šæŠŠå­æ¨¡å—å¯¼å…¥è¿›å»ï¼Œstoreçš„å…¥å£æ–‡ä»¶ï¼Œæœ€åå¯¼å‡ºstore</p><img src="D:\webstorm\typora\images\image-20231126165940242.png" alt="image-20231126165940242" style="zoom:33%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å­æ¨¡å—.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; createSlice &#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span></span><br><span class="line"><span class="comment">// createSliceåˆ›å»º store</span></span><br><span class="line"><span class="keyword">const</span> counterStore = <span class="title function_">createSlice</span>(&#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&#x27;counter&#x27;</span>ï¼Œ     <span class="comment">// storeåå­—</span></span><br><span class="line">    <span class="attr">initialState</span>: &#123;       <span class="comment">// åˆå§‹çŠ¶æ€æ•°æ®</span></span><br><span class="line">      <span class="attr">count</span>: <span class="number">0</span></span><br><span class="line">    &#125;ï¼Œ</span><br><span class="line">    <span class="attr">reducer</span>: &#123;</span><br><span class="line">      <span class="comment">// ä¿®æ”¹çŠ¶æ€çš„æ–¹æ³•ï¼ˆåŒæ­¥ï¼‰  actionï¼šå‚æ•°</span></span><br><span class="line">      æ–¹æ³•å(stateï¼Œ action ) &#123; &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// è§£æ„å‡º  åˆ›å»ºactionå¯¹è±¡çš„å‡½æ•°ï¼ˆactionCreaterï¼‰</span></span><br><span class="line"><span class="keyword">const</span> &#123; å‡½æ•°åï¼Œã€‚ã€‚ã€‚  &#125; = counterStore.<span class="property">actions</span></span><br><span class="line"><span class="comment">// è·å–reducerå‡½æ•°</span></span><br><span class="line"><span class="keyword">const</span> counterReducer = counterStore.<span class="property">reducer</span></span><br><span class="line"><span class="comment">// å¯¼å‡º    åˆ›å»ºactionå¯¹è±¡çš„å‡½æ•°   å’Œ   reducer  å‡½æ•°</span></span><br><span class="line"><span class="keyword">export</span> &#123; å‡½æ•°åï¼Œã€‚ã€‚&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> counterReducer           <span class="comment">// å­æ¨¡å—å</span></span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ ¹store</span></span><br><span class="line"><span class="keyword">import</span> &#123; configureStore &#125; <span class="keyword">from</span> <span class="string">&quot;@reduxjs/toolkit&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> å­æ¨¡å—å <span class="keyword">from</span> <span class="string">&quot;./modules/counterStore&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºæ ¹store ç»„åˆå­æ¨¡å—</span></span><br><span class="line"><span class="keyword">const</span> store = <span class="title function_">configureStore</span>(&#123;</span><br><span class="line">    <span class="attr">reducer</span>: &#123;</span><br><span class="line">        <span class="attr">counter</span>: counterReducer</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">// å¯¼å‡ºæ ¹store</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure><h3 id="ä¸ºreactæ³¨å…¥store-react-redux"><a href="#ä¸ºreactæ³¨å…¥store-react-redux" class="headerlink" title="ä¸ºreactæ³¨å…¥store  (react-redux)"></a>ä¸ºreactæ³¨å…¥store  (react-redux)</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.</span></span><br><span class="line"><span class="comment">// å†…ç½®Provider ç»„ä»¶é€šè¿‡ storeå‚æ•° æŠŠåˆ›å»ºå¥½çš„store å®ä¾‹æ³¨å…¥åº”ç”¨ä¸­</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Provider</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;react-redux&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">  <span class="language-xml"><span class="tag">&lt;<span class="name">Provider</span>  <span class="attr">store</span>=<span class="string">&#123;store&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">App</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">  <span class="tag">&lt;/<span class="name">Provider</span>&gt;</span></span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨storeä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="comment">// è¦ä½¿ç”¨é’©å­å‡½æ•°ï¼šuseSelector     ä½œç”¨ï¼šæŠŠstoreä¸­çš„æ•°æ®æ˜ å°„åˆ° ç»„ä»¶ä¸­</span></span><br><span class="line">ä¾‹ï¼š<span class="keyword">const</span> &#123; æ•°æ®å &#125; = <span class="title function_">useSelector</span>(<span class="function"><span class="params">state</span> =&gt;</span> state.<span class="property">counter</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.</span></span><br><span class="line"><span class="comment">// ä¿®æ”¹storeä¸­çš„æ•°æ®</span></span><br><span class="line"><span class="comment">// ä½¿ç”¨å¦ä¸€ä¸ªhookå‡½æ•°   useDispatch     ä½œç”¨ï¼šç”Ÿæˆdispatchå‡½æ•° ï¼ˆæäº¤actionå¯¹è±¡ï¼‰</span></span><br><span class="line"><span class="keyword">import</span> &#123; åˆ›å»ºactionçš„å‡½æ•° &#125; <span class="keyword">from</span> â€˜ å­æ¨¡å— â€™</span><br><span class="line"><span class="keyword">import</span> &#123; useDispatchï¼Œ useSelector &#125; <span class="keyword">from</span> â€˜react-reduxâ€™</span><br><span class="line">  <span class="comment">// å¾—åˆ°dispatch å‡½æ•°</span></span><br><span class="line">  <span class="keyword">const</span> dispatch = <span class="title function_">useDispatch</span>()</span><br><span class="line">  <span class="comment">// è°ƒç”¨dispatch æäº¤action (å­æ¨¡å—ä¸­å¯¼å‡ºçš„actionCreater)</span></span><br><span class="line">  <span class="title function_">dispatch</span>( <span class="title function_">action</span>() )</span><br><span class="line">  <span class="title function_">dispatch</span>( <span class="title function_">action</span>( å‚æ•° ) )  <span class="comment">// è°ƒç”¨æ—¶ä¼ å‚, ä¼ é€’çš„å‚æ•°ä¼šè‡ªåŠ¨è·‘åˆ°ï¼Œå‡½æ•°çš„ action.payload å±æ€§ä¸­</span></span><br><span class="line">ä¾‹å¦‚ï¼š å­æ¨¡å—ä¸­ å‡½æ•°åï¼ˆstateï¼Œ actionï¼‰&#123;</span><br><span class="line">    state = action.<span class="property">payload</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼‚æ­¥æ“ä½œ</span></span><br><span class="line"><span class="comment">// 1.åˆ›å»ºstoreçš„å†™æ³•ä¸å˜ï¼Œé…ç½®å¥½åŒæ­¥ä¿®æ”¹stateçš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">// 2.å•ç‹¬å°è£…ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°å†…éƒ¨return ä¸€ä¸ªæ–°å‡½æ•°ï¼Œåœ¨æ–°å‡½æ•°ä¸­</span></span><br><span class="line"><span class="keyword">function</span> å‡½æ•°å() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">        <span class="comment">//   2.1 å°è£…å¼‚æ­¥è¯·æ±‚è·å–æ•°æ®</span></span><br><span class="line">        <span class="keyword">const</span> res = <span class="keyword">await</span> axios.<span class="title function_">get</span>(url)</span><br><span class="line">        <span class="comment">//   2.2 è°ƒç”¨åŒæ­¥æ–¹æ³•ï¼Œä¼ å…¥å¼‚æ­¥æ•°æ®ï¼ˆè·å–çš„æ•°æ®ä¼ å‚ï¼‰ï¼Œç”Ÿæˆactionå¯¹è±¡å¹¶dispatchæäº¤</span></span><br><span class="line">        <span class="title function_">dispatch</span>(åŒæ­¥ä¸­ç”Ÿæˆactionå¯¹è±¡çš„æ–¹æ³•() )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 3.ç»„ä»¶ä¸­dispatchå†™æ³•ä¸å˜</span></span><br></pre></td></tr></table></figure><h1 id="react-Redux"><a href="#react-Redux" class="headerlink" title="react-Redux"></a>react-Redux</h1><blockquote><p>ä»€ä¹ˆæ˜¯react-reduxï¼Ÿ react-reduxæ˜¯ä¸€ä¸ªreactæ’ä»¶åº“,ä¸“é—¨ç”¨æ¥ç®€åŒ–reactåº”ç”¨ä¸­ä½¿ç”¨reduxã€‚ä»–æ˜¯ä»reduxå°è£…è€Œæ¥ï¼Œå› æ­¤åŸºæœ¬åŸç†å’Œreduxæ˜¯ä¸€æ ·çš„ï¼ŒåŒæ—¶å­˜åœ¨ä¸€äº›å·®å¼‚ã€‚</p></blockquote><img src="D:\webstorm\typora\images\image-20231213171738389.png" alt="image-20231213171738389" style="zoom: 67%;" /><p>React-Redux å°†æ‰€æœ‰ç»„ä»¶åˆ†æˆä¸¤å¤§ç±»ï¼šUI ç»„ä»¶ï¼ˆpresentational componentï¼‰å’Œå®¹å™¨ç»„ä»¶ï¼ˆcontainer componentï¼‰</p><h1 id="reactRouter"><a href="#reactRouter" class="headerlink" title="reactRouter"></a>reactRouter</h1><h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><p>å®‰è£…reactRouteråŒ…</p><p>npm i react-router-dom</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">RouterProvider</span>, createBrowserRouter&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br><span class="line"><span class="comment">// åˆ›å»ºrouterå®ä¾‹</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createBrowerRouter</span>([</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">      <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>æˆ‘æ˜¯ç™»å½•<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>    <span class="comment">//å³æ”¯æŒç»„ä»¶ï¼Œå¯ä»¥æ˜¯å¸¸è§„çš„å…ƒç´ jsx</span></span><br><span class="line">    &#125;,v</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="comment">// ç»‘å®šè·¯ç”±  æŠŠæ ¹ç»„ä»¶æ›¿æ¢æˆRouterProviderç»„ä»¶</span></span><br><span class="line"><span class="keyword">const</span> root = <span class="title class_">ReactDOM</span>.<span class="title function_">createRoot</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;root&#x27;</span>));</span><br><span class="line">root.<span class="title function_">render</span>(</span><br><span class="line">       <span class="language-xml"><span class="tag">&lt;<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">          <span class="tag">&lt;<span class="name">RouterProvider</span> <span class="attr">router</span>=<span class="string">&#123;router&#125;</span>&gt;</span><span class="tag">&lt;/<span class="name">RouterProvider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">React.StrictMode</span>&gt;</span></span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="åˆ†æ¨¡å—"><a href="#åˆ†æ¨¡å—" class="headerlink" title="åˆ†æ¨¡å—"></a>åˆ†æ¨¡å—</h3><p>page é¡µé¢  ä¾‹å¦‚ï¼šlogin.js    article.js</p><p>router è·¯ç”±æ¨¡å— index.js  é…ç½®è·¯ç”±ï¼ŒæŠŠæ‰€éœ€è¦çš„è·¯ç”±é¡µé¢å¯¼å…¥è¿›å» ï¼Œæœ€åæŠŠæ€»è·¯ç”±å¯¼å‡º</p><h3 id="è·¯ç”±å¯¼èˆª"><a href="#è·¯ç”±å¯¼èˆª" class="headerlink" title="è·¯ç”±å¯¼èˆª"></a>è·¯ç”±å¯¼èˆª</h3><p>å¤šä¸ªè·¯ç”±ä¹‹é—´è·³è½¬ï¼Œæœ‰å¯èƒ½æºå¸¦å‚æ•°è¿›è¡Œé€šä¿¡ï¼ˆä¸¤ç§æ–¹å¼ï¼‰</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1ï¼Œå£°æ˜å¼å¯¼èˆª &lt;link to=&#x27;/article&#x27;&gt;æ–‡ç« &lt;/link&gt; ä¾‹ï¼šåå°å·¦ä¾§çš„å¯¼èˆªè·³è½¬</span></span><br><span class="line"><span class="comment">// å½“æˆ  a  æ ‡ç­¾ç”¨å³å¯ã€‚      æŒ‡å®štoå±æ€§è·³è½¬åˆ°pathï¼Œç»„ä»¶ä¼šè¢«æ¸²æŸ“æˆæµè§ˆå™¨æ”¯æŒçš„aæ ‡ç­¾</span></span><br><span class="line"><span class="comment">// ä¼ å‚æ—¶ï¼Œé€šè¿‡å­—ç¬¦ä¸²æ‹¼æ¥å³å¯</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.ç¼–ç¨‹å¼å¯¼èˆª é€šè¿‡hookå‡½æ•° useNavigate å¾—åˆ°å¯¼èˆªæ–¹æ³•navigate</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> navigate = <span class="title function_">useNavigate</span>()</span><br><span class="line"><span class="title function_">navigate</span>(<span class="string">&#x27;/article&#x27;</span>)</span><br><span class="line"><span class="comment">// é€šè¿‡è°ƒç”¨è¿™ä¸ªå‡½æ•° ä»¥å‘½ä»¤å¼ è·³è½¬</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3,è·å–å½“å‰è·¯ç”±</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">pathname</span></span><br></pre></td></tr></table></figure><h4 id="è·³è½¬ä¼ å‚"><a href="#è·³è½¬ä¼ å‚" class="headerlink" title="è·³è½¬ä¼ å‚"></a>è·³è½¬ä¼ å‚</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä»¥ç¼–ç¨‹å¼ä¸ºä¾‹ï¼Œå£°æ˜å¼ åŒç†</span></span><br><span class="line"><span class="number">1</span>ï¼ŒsearchParams ä¼ å‚</span><br><span class="line"><span class="comment">// åœ¨è·³è½¬æ—¶è·¯ç”±ï¼Ÿæ‹¼æ¥ä¼ é€’çš„å‚æ•°  &amp; é“¾æ¥å¤šä¸ªå‚æ•°</span></span><br><span class="line">    <span class="title function_">navigate</span>(<span class="string">&#x27;/Article?id=1101&amp;name=jack&#x27;</span>)</span><br><span class="line"><span class="comment">// åœ¨å¯¹åº”è·¯ç”± ä¸­æ¥æ”¶å‚æ•°  hookå‡½æ•° useSearchParams æ•°ç»„ä¸­è§£æ„å‡º paramså¯¹è±¡</span></span><br><span class="line">    <span class="keyword">const</span> [params] = <span class="title function_">useSearchParams</span>()</span><br><span class="line">    <span class="comment">// params èº«ä¸Šçš„getæ–¹æ³•è·å–å±æ€§å</span></span><br><span class="line">    <span class="keyword">const</span> id = params.<span class="title function_">get</span>(<span class="string">&#x27;id&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="number">2</span>ï¼Œparams ä¼ å‚</span><br><span class="line"><span class="comment">// è·³è½¬æ—¶ç”¨ / æ–œæ </span></span><br><span class="line"><span class="title function_">navigate</span>(<span class="string">&#x27;Article/1001/jack&#x27;</span>)</span><br><span class="line"><span class="comment">// é…ç½®è·¯ç”±æ—¶è¦æœ‰å ä½ç¬¦</span></span><br><span class="line"><span class="attr">path</span>: <span class="string">&#x27;/Article/:id/:name&#x27;</span></span><br><span class="line"><span class="comment">// æ¥æ”¶å‚æ•°   hook å‡½æ•°useParams</span></span><br><span class="line"><span class="keyword">const</span> params = <span class="title function_">useParams</span>()</span><br><span class="line">    <span class="keyword">const</span> id = params.<span class="property">id</span></span><br></pre></td></tr></table></figure><h4 id="åµŒå¥—è·¯ç”±"><a href="#åµŒå¥—è·¯ç”±" class="headerlink" title="åµŒå¥—è·¯ç”±"></a>åµŒå¥—è·¯ç”±</h4><img src="D:\webstorm\typora\images\image-20231127174815874.png" alt="image-20231127174815874" style="zoom: 67%;" /><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1ï¼Œé…ç½®å­è·¯ç”±</span></span><br><span class="line"><span class="keyword">const</span> router = <span class="title function_">createRouter</span>([</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span> /&gt;</span></span>,</span><br><span class="line">        <span class="attr">children</span>: [                   <span class="comment">// å­è·¯ç”±é…ç½®</span></span><br><span class="line">        &#123; <span class="attr">path</span>: <span class="string">&#x27;board&#x27;</span>, <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Board</span> /&gt;</span></span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&#x27;about&#x27;</span>, <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">About</span> /&gt;</span></span> &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">         <span class="attr">path</span>: <span class="string">&#x27;/Article&#x27;</span>,</span><br><span class="line">      <span class="attr">element</span>: <span class="language-xml"><span class="tag">&lt;<span class="name">Article</span> /&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">])</span><br><span class="line"><span class="comment">// 2ï¼Œé…ç½®äºŒçº§è·¯ç”±å‡ºå£ ï¼ˆæ¸²æŸ“çš„ä½ç½®ï¼‰ ç”¨&lt;Outlet/&gt;ç»„ä»¶</span></span><br><span class="line">    <span class="number">2.1</span> é»˜è®¤äºŒçº§è·¯ç”± è®¿é—®çš„æ˜¯ä¸€çº§è·¯ç”±æ—¶ï¼Œé»˜è®¤çš„äºŒçº§è·¯ç”±å¾—åˆ°æ¸²æŸ“</span><br><span class="line">    åœ¨äºŒçº§è·¯ç”±çš„é…ç½®ä¸­ path æ¢æˆ index å±æ€§ï¼Œå¹¶è®¾ç½®æˆ <span class="literal">true</span></span><br><span class="line">    <span class="attr">index</span>: <span class="literal">true</span></span><br><span class="line">    å¹¶åœ¨ è·³è½¬æ—¶ï¼Œæ›´æ”¹è·³è½¬çš„è·¯å¾„ä¸º  â€˜/â€™</span><br><span class="line">    to=<span class="string">&quot;/&quot;</span></span><br><span class="line">    <span class="number">2.2</span> <span class="number">404</span>è·¯ç”±</span><br><span class="line">    è¾“å…¥çš„urléƒ½åŒ¹é…ä¸åˆ°å¯¹åº”çš„pathæ—¶ï¼Œæ˜¾ç¤ºçš„<span class="number">404</span> å…œåº•ç»„ä»¶æ¸²æŸ“</span><br><span class="line">    å‡†å¤‡ä¸€ä¸ª <span class="title class_">NotFound</span> ç»„ä»¶</span><br><span class="line">    <span class="keyword">const</span> <span class="title class_">NotFound</span>() &#123;</span><br><span class="line">            <span class="keyword">return</span> (</span><br><span class="line">                <span class="comment">// è‡ªå®šä¹‰æ¨¡æ¿</span></span><br><span class="line">            )</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">NotFound</span></span><br><span class="line">åœ¨é…ç½®çš„è·¯ç”±è¡¨ æœ«å°¾ï¼Œä»¥ * å·ä½œä¸º path é…ç½®è·¯ç”±</span><br><span class="line">        &#123; pathï¼š *ï¼Œ elementï¼š &lt;<span class="title class_">NotFound</span> /&gt; &#125;</span><br><span class="line">     <span class="number">2.3</span> ä¸¤ç§è·¯ç”±æ¨¡å¼</span><br><span class="line">     history å’Œ hash ï¼Œ<span class="title class_">ReactRouter</span> åˆ›å»ºè·¯ç”±æ—¶ä¸€èˆ¬ç”¨çš„éƒ½æ˜¯ createBrowerRouterï¼Œåˆ›å»ºhashæ¨¡å¼ç”¨createHashRouter</span><br><span class="line">     historyurl/login      historyå¯¹è±¡+pushStateäº‹ä»¶éœ€è¦åç«¯æ”¯æŒ</span><br><span class="line">     hash       url/#/login    ç›‘å¬hashChangeäº‹ä»¶ä¸éœ€è¦</span><br></pre></td></tr></table></figure><h1 id="æ•°æ®Mock"><a href="#æ•°æ®Mock" class="headerlink" title="æ•°æ®Mock"></a>æ•°æ®Mock</h1><p>åœ¨å‰åç«¯ åˆ†ç¦»çš„ å¼€å‘æ¨¡å¼ ä¸‹ï¼Œå‰ç«¯å¯ä»¥åœ¨ æ²¡æœ‰ å®é™…çš„åç«¯æ¥å£ä¸‹ï¼Œå…ˆæ¨¡æ‹Ÿå‡æ•°æ®  è¿›è¡Œæ­£å¸¸ä¸šåŠ¡çš„å¼€å‘</p><img src="D:\webstorm\typora\images\image-20231128171131129.png" alt="image-20231128171131129" style="zoom:50%;" /><p>json - server å®ç° æ•°æ®mock</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. å®‰è£… json-server</span></span><br><span class="line"> npm i -D json-server</span><br><span class="line"><span class="comment">// 2. å‡†å¤‡ä¸€ä¸ªjsonæ–‡ä»¶ï¼Œä¾‹ï¼š data.json</span></span><br><span class="line"><span class="comment">// 3. æ·»åŠ å¯åŠ¨å‘½ä»¤ï¼Œ</span></span><br><span class="line"><span class="string">&quot;server&quot;</span>: <span class="string">&quot;json-server ./server/data.json --port 8888&quot;</span></span><br><span class="line"><span class="comment">// 4. å¯ä»¥è®¿é—®æ¥å£äº†</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      
        <tags>
            
            <tag> react </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®ä¸­è¡¨çš„å…³ç³»</title>
      <link href="/2024/03/14/shu-ju-zhong-biao-de-guan-xi/"/>
      <url>/2024/03/14/shu-ju-zhong-biao-de-guan-xi/</url>
      
        <content type="html"><![CDATA[<h3 id="è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»"><a href="#è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»" class="headerlink" title="è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»"></a>è¡¨ä¸è¡¨ä¹‹é—´çš„å…³ç³»</h3><h4 id="1ï¼Œä¸€å¯¹ä¸€å…³ç³»"><a href="#1ï¼Œä¸€å¯¹ä¸€å…³ç³»" class="headerlink" title="1ï¼Œä¸€å¯¹ä¸€å…³ç³»"></a>1ï¼Œä¸€å¯¹ä¸€å…³ç³»</h4><p>æ¯”å¦‚æœ‰Aã€Bä¸¤å¼ è¡¨ï¼ŒAè¡¨ä¸­çš„æ¯ä¸€æ¡æ•°æ®ï¼Œåœ¨Bè¡¨ä¸­æœ‰ä¸€æ¡å”¯ä¸€çš„æ•°æ®ä¸ä¹‹å¯¹åº”ã€‚</p><p><strong>ç”¨æˆ·è¡¨userï¼š</strong></p><table><thead><tr><th>user_idï¼ˆç”¨æˆ·ç¼–å·ï¼‰</th><th>è´¦å·username</th><th>å¯†ç password</th></tr></thead><tbody><tr><td>001</td><td>admin</td><td>admin888</td></tr><tr><td>002</td><td>itheima</td><td>123456</td></tr></tbody></table>]]></content>
      
      
      
        <tags>
            
            <tag> sql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/03/08/hello-world/"/>
      <url>/2024/03/08/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
